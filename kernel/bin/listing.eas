0000 :                               ramstart = $4000
0000 :                               kernelend = $1200
0000 :                               pixelwidth = 320
0000 :                               pixelheight = 240
0000 :                               charwidth = 53
0000 :                               charheight = 30
0000 :                               pixelcharwidth = 6
0000 :                               pixelcharheight = 8
0000 :                               blitterbase = $ff20
0000 :                               blitterstatus = blitterbase
0000 :                               blitterx  = blitterbase
0000 :                               blittery  = blitterbase+1
0000 :                               blitterdata = blitterbase+2
0000 :                               blittercmask = blitterbase+3
0000 :                               blittercmd = blitterbase+4
0000 :                               paletteregister = $ff10
0000 :                               keyboardport = $ff00
0000 :                               hwtimer = $ff30
0000 :                               audioclock = 5000000
0000 :                               sndchannelbase = $ff40
0000 :                               sndnoise = sndchannelbase+0
0000 :                               sndtone1 = sndchannelbase+2
0000 :                               sndtone2 = sndchannelbase+2
0000 :                               repeatdelay = 80
0000 :                               repeatspeed = 10
0000 :                               tabstop = 4
0000 :                               maxistrsize = 10
0000 :                               functionkeysize = 12
0000 :                               spritedefaultimagecount = 32
0000 :                               timerrate = 5
0000 :                               spriteobjectcount = 32
0000 :                               spriterecordsize = 6
0000 :                               spx = 0
0000 :                               spy = 1
0000 :                               spstatus = 2
0000 :                               spnewx = 3
0000 :                               spnewy = 4
0000 :                               spnewstatus = 5
0000 :                               spnochange = $0800
0000 :                               sndchannels = 3
0000 :                               sndcompletetime = 0
0000 :                               sndpitch = 1
0000 :                               sndslide = 2
0000 :                               sndqueuehead = 3
0000 :                               sndqueuetail = 4
0000 :                               sndqueuestart = 5
0000 :                               sndqueuesize = 32
0000 :                               sndrecordsize = sndqueuestart+sndqueuesize
0000 :                               .osreset
0000 : aff0                          brl  r15,r15,#0
0001 : 03df                          word  bootcode
0002 :                               .oswaitblitter
0002 : aff0 065b                     jmp  #osxwaitblitter
0004 :                               .osprintcharacter
0004 : aff0 0a00                     jmp  #osxprintcharacter
0006 :                               .osprintinline
0006 : aff0 0b84                     jmp  #osxprintinline
0008 :                               .osprintstring
0008 : aff0 0b7b                     jmp  #osxprintstring
000a :                               .osspriteselect
000a : aff0 0ba6                     jmp  #osxspriteselect
0010 :                               .osfileoperation
0010 : aff0 03b4                     jmp  #osxfileoperation
0012 :                               .osreadsystemvariable
0012 : aff0 1051                     jmp  #osxreadsystemvariable
0014 :                               .osudivide16
0014 : aff0 0f52                     jmp  #osxudivide16
0016 :                               .ossdivide16
0016 : aff0 0f6c                     jmp  #osxsdivide16
0018 :                               .osrandom16
0018 : aff0 0f85                     jmp  #osxrandom16
001a :                               .osrandomseed
001a : aff0 0f9d                     jmp  #osxrandomseed
001c :                               .osinclusiveor
001c : aff0 1055                     jmp  #osxinclusiveor
001e :                               .osstrtoint
001e : aff0 0fa0                     jmp  #osxstrtoint
0020 :                               .osinttostr
0020 : aff0 0fe0                     jmp  #osxinttostr
0022 :                               .osuppercase
0022 : aff0 1027                     jmp  #osxuppercase
0024 :                               .oslowercase
0024 : aff0 1039                     jmp  #osxlowercase
0026 :                               .oswordlength
0026 : aff0 104b                     jmp  #osxwordlength
0028 :                               .ossystemmanager
0028 : aff0 045f                     jmp  #osxsystemmanager
002a :                               .osgetkeyboard
002a : aff0 051f                     jmp  #osxgetkeyboard
002c :                               .oscursorget
002c : aff0 04b8                     jmp  #osxcursorget
002e :                               .oslineinput
002e : aff0 0615                     jmp  #osxlineinput
0030 :                               .osinputlimit
0030 : aff0 05c0                     jmp  #osxinputlimit
0032 :                               .osreadjoystick
0032 : aff0 064e                     jmp  #osxreadjoystick
0034 :                               .osdefinefkey
0034 : aff0 0490                     jmp  #osxdefinefkey
0036 :                               .osgettextpos
0036 : aff0 0b76                     jmp  #osxgettextpos
0038 :                               .ossetplanes
0038 : aff0 0697                     jmp  #osxsetplanes
003a :                               .ossetactiveplane
003a : aff0 0719                     jmp  #osxsetactiveplane
003c :                               .ossetinkcolourmask
003c : aff0 0721                     jmp  #osxsetinkcolourmask
003e :                               .ossetbackplanepalette
003e : aff0 06e0                     jmp  #osxsetbackplanepalette
0040 :                               .ossetfrontplanepalette
0040 : aff0 06f5                     jmp  #osxsetfrontplanepalette
0042 :                               .osgraphicsmove
0042 : aff0 08d0                     jmp  #osxgraphicsmove
0044 :                               .osplotpixel
0044 : aff0 08b7                     jmp  #osxplotpixel
0046 :                               .osdrawline
0046 : aff0 083f                     jmp  #osxdrawline
0048 :                               .osdrawrectangle
0048 : aff0 0817                     jmp  #osxdrawrectangle
004a :                               .osfillrectangle
004a : aff0 08d5                     jmp  #osxfillrectangle
004c :                               .osdrawellipse
004c : aff0 0740                     jmp  #osxdrawellipse
004e :                               .osfillellipse
004e : aff0 0745                     jmp  #osxfillellipse
0050 :                               .osdrawstring
0050 : aff0 092b                     jmp  #osxdrawstring
0052 :                               .osspritereset
0052 : aff0 0cb9                     jmp  #osxspritereset
0054 :                               .osspriteupdate
0054 : aff0 0ce9                     jmp  #osxspriteupdate
0056 :                               .osspritemove
0056 : aff0 0bbe                     jmp  #osxspritemove
0058 :                               .osspritesetimage
0058 : aff0 0bda                     jmp  #osxspritesetimage
005a :                               .osspritesetcolour
005a : aff0 0c1b                     jmp  #osxspritesetcolour
005c :                               .osspritesetorientation
005c : aff0 0bf1                     jmp  #osxspritesetorientation
005e :                               .osspritesetsize
005e : aff0 0c05                     jmp  #osxspritesetsize
0060 :                               .osspritecollision
0060 : aff0 0c62                     jmp  #osxspritecollision
0062 :                               .osspritekill
0062 : aff0 0c30                     jmp  #osxspritekill
0064 :                               .osgetspriteinfo
0064 : aff0 0c50                     jmp  #osxgetspriteinfo
0066 :                               .osdrawtilemap
0066 : aff0 0dc7                     jmp  #osxdrawtilemap
0068 :                               .osresetallchannels
0068 : aff0 0ec3                     jmp  #osxresetallchannels
006a :                               .ossoundresetchannel
006a : aff0 0ed1                     jmp  #osxsoundresetchannel
006c :                               .ossoundplay
006c : aff0 0e6c                     jmp  #osxsoundplay
006e :                               .ossoundcomplete
006e : aff0 0eab                     jmp  #osxsoundcomplete
0070 :                               .keyboardmapping
0070 : 3231 3433 3635 3837 3039      byte 49,50,51,52,53,54,55,56,57,48,45,61,8,0,0,0
0078 : 7109 6577 7472 7579 6f69      byte 9,113,119,101,114,116,121,117,105,111,112,91,
0080 : 7361 6664 6867 6b6a 3b6c      byte 97,115,100,102,103,104,106,107,108,59,39,35,1
0088 : 5c20 787a 7663 6e62 2c6d      byte 32,92,122,120,99,118,98,110,109,44,46,47,0,0,
0090 : f1f0 f3f2 f5f4 0000 0000      byte 240,241,242,243,244,245,0,0,0,0,0,0,0,0,0,0
0098 : 0201 0403 0000 0000 0000      byte 1,2,3,4,0,0,0,0,0,0,0,0,0,0,0,0
00a0 :                               .shifttable
00a0 : 2740                          byte  64, 39
00a1 : 2c3c                          byte  60, 44
00a2 : 2d5f                          byte  95, 45
00a3 : 2e3e                          byte  62, 46
00a4 : 2f3f                          byte  63, 47
00a5 : 3029                          byte  41, 48
00a6 : 3121                          byte  33, 49
00a7 : 3222                          byte  34, 50
00a8 : 3323                          byte  35, 51
00a9 : 3424                          byte  36, 52
00aa : 3525                          byte  37, 53
00ab : 365e                          byte  94, 54
00ac : 3726                          byte  38, 55
00ad : 382a                          byte  42, 56
00ae : 3928                          byte  40, 57
00af : 3b3a                          byte  58, 59
00b0 : 3d2b                          byte  43, 61
00b1 : 5b7b                          byte 123, 91
00b2 : 5d7d                          byte 125, 93
00b3 : 0000                          byte  0,0
00b4 :                               .fontdatadefault
00b4 : 0000 0000 0000 0000 0000      word $0000,$0000,$0000,$0000,$0000,$0000,$0000,$00
00bc : 2000 2000 2000 2000 0000      word $2000,$2000,$2000,$2000,$0000,$0000,$2000,$00
00c4 : 5000 5000 5000 0000 0000      word $5000,$5000,$5000,$0000,$0000,$0000,$0000,$00
00cc : 5000 5000 f800 5000 f800      word $5000,$5000,$f800,$5000,$f800,$5000,$5000,$00
00d4 : 2000 7800 a000 7000 2800      word $2000,$7800,$a000,$7000,$2800,$f000,$2000,$00
00dc : c000 c800 1000 2000 4000      word $c000,$c800,$1000,$2000,$4000,$9800,$1800,$00
00e4 : 6000 9000 a000 4000 a800      word $6000,$9000,$a000,$4000,$a800,$9000,$6800,$00
00ec : 6000 2000 4000 0000 0000      word $6000,$2000,$4000,$0000,$0000,$0000,$0000,$00
00f4 : 1000 2000 4000 4000 4000      word $1000,$2000,$4000,$4000,$4000,$2000,$1000,$00
00fc : 4000 2000 1000 1000 1000      word $4000,$2000,$1000,$1000,$1000,$2000,$4000,$00
0104 : 0000 2000 a800 7000 a800      word $0000,$2000,$a800,$7000,$a800,$2000,$0000,$00
010c : 0000 2000 2000 f800 2000      word $0000,$2000,$2000,$f800,$2000,$2000,$0000,$00
0114 : 0000 0000 0000 0000 6000      word $0000,$0000,$0000,$0000,$6000,$2000,$4000,$00
011c : 0000 0000 0000 f800 0000      word $0000,$0000,$0000,$f800,$0000,$0000,$0000,$00
0124 : 0000 0000 0000 0000 0000      word $0000,$0000,$0000,$0000,$0000,$6000,$6000,$00
012c : 0000 0800 1000 2000 4000      word $0000,$0800,$1000,$2000,$4000,$8000,$0000,$00
0134 : 7000 8800 9800 a800 c800      word $7000,$8800,$9800,$a800,$c800,$8800,$7000,$00
013c : 2000 6000 2000 2000 2000      word $2000,$6000,$2000,$2000,$2000,$2000,$7000,$00
0144 : 7000 8800 0800 1000 2000      word $7000,$8800,$0800,$1000,$2000,$4000,$f800,$00
014c : f800 1000 2000 1000 0800      word $f800,$1000,$2000,$1000,$0800,$8800,$7000,$00
0154 : 1000 3000 5000 9000 f800      word $1000,$3000,$5000,$9000,$f800,$1000,$1000,$00
015c : f800 8000 f000 0800 0800      word $f800,$8000,$f000,$0800,$0800,$8800,$7000,$00
0164 : 3000 4000 8000 f000 8800      word $3000,$4000,$8000,$f000,$8800,$8800,$7000,$00
016c : f800 8800 0800 1000 2000      word $f800,$8800,$0800,$1000,$2000,$2000,$2000,$00
0174 : 7000 8800 8800 7000 8800      word $7000,$8800,$8800,$7000,$8800,$8800,$7000,$00
017c : 7000 8800 8800 7800 0800      word $7000,$8800,$8800,$7800,$0800,$1000,$6000,$00
0184 : 0000 6000 6000 0000 6000      word $0000,$6000,$6000,$0000,$6000,$6000,$0000,$00
018c : 0000 6000 6000 0000 6000      word $0000,$6000,$6000,$0000,$6000,$2000,$4000,$00
0194 : 1000 2000 4000 8000 4000      word $1000,$2000,$4000,$8000,$4000,$2000,$1000,$00
019c : 0000 0000 f800 0000 f800      word $0000,$0000,$f800,$0000,$f800,$0000,$0000,$00
01a4 : 4000 2000 1000 0800 1000      word $4000,$2000,$1000,$0800,$1000,$2000,$4000,$00
01ac : 7000 8800 0800 1000 2000      word $7000,$8800,$0800,$1000,$2000,$0000,$2000,$00
01b4 : 7000 8800 0800 6800 a800      word $7000,$8800,$0800,$6800,$a800,$a800,$7000,$00
01bc : 7000 8800 8800 8800 f800      word $7000,$8800,$8800,$8800,$f800,$8800,$8800,$00
01c4 : f000 8800 8800 f000 8800      word $f000,$8800,$8800,$f000,$8800,$8800,$f000,$00
01cc : 7000 8800 8000 8000 8000      word $7000,$8800,$8000,$8000,$8000,$8800,$7000,$00
01d4 : e000 9000 8800 8800 8800      word $e000,$9000,$8800,$8800,$8800,$9000,$e000,$00
01dc : f800 8000 8000 f000 8000      word $f800,$8000,$8000,$f000,$8000,$8000,$f800,$00
01e4 : f800 8000 8000 f000 8000      word $f800,$8000,$8000,$f000,$8000,$8000,$8000,$00
01ec : 7000 8800 8000 b800 8800      word $7000,$8800,$8000,$b800,$8800,$8800,$7800,$00
01f4 : 8800 8800 8800 f800 8800      word $8800,$8800,$8800,$f800,$8800,$8800,$8800,$00
01fc : 7000 2000 2000 2000 2000      word $7000,$2000,$2000,$2000,$2000,$2000,$7000,$00
0204 : 3800 1000 1000 1000 1000      word $3800,$1000,$1000,$1000,$1000,$9000,$6000,$00
020c : 8800 9000 a000 c000 a000      word $8800,$9000,$a000,$c000,$a000,$9000,$8800,$00
0214 : 8000 8000 8000 8000 8000      word $8000,$8000,$8000,$8000,$8000,$8000,$f800,$00
021c : 8800 d800 a800 a800 8800      word $8800,$d800,$a800,$a800,$8800,$8800,$8800,$00
0224 : 8800 8800 c800 a800 9800      word $8800,$8800,$c800,$a800,$9800,$8800,$8800,$00
022c : 7000 8800 8800 8800 8800      word $7000,$8800,$8800,$8800,$8800,$8800,$7000,$00
0234 : f000 8800 8800 f000 8000      word $f000,$8800,$8800,$f000,$8000,$8000,$8000,$00
023c : 7000 8800 8800 8800 a800      word $7000,$8800,$8800,$8800,$a800,$9000,$6800,$00
0244 : f000 8800 8800 f000 a000      word $f000,$8800,$8800,$f000,$a000,$9000,$8800,$00
024c : 7800 8000 8000 7000 0800      word $7800,$8000,$8000,$7000,$0800,$0800,$f000,$00
0254 : f800 2000 2000 2000 2000      word $f800,$2000,$2000,$2000,$2000,$2000,$2000,$00
025c : 8800 8800 8800 8800 8800      word $8800,$8800,$8800,$8800,$8800,$8800,$7000,$00
0264 : 8800 8800 8800 8800 8800      word $8800,$8800,$8800,$8800,$8800,$5000,$2000,$00
026c : 8800 8800 8800 a800 a800      word $8800,$8800,$8800,$a800,$a800,$a800,$5000,$00
0274 : 8800 8800 5000 2000 5000      word $8800,$8800,$5000,$2000,$5000,$8800,$8800,$00
027c : 8800 8800 8800 5000 2000      word $8800,$8800,$8800,$5000,$2000,$2000,$2000,$00
0284 : f800 0800 1000 2000 4000      word $f800,$0800,$1000,$2000,$4000,$8000,$f800,$00
028c : e000 8000 8000 8000 8000      word $e000,$8000,$8000,$8000,$8000,$8000,$e000,$00
0294 : 0000 8000 4000 2000 1000      word $0000,$8000,$4000,$2000,$1000,$0800,$0000,$00
029c : 7000 1000 1000 1000 1000      word $7000,$1000,$1000,$1000,$1000,$1000,$7000,$00
02a4 : 2000 5000 8800 0000 0000      word $2000,$5000,$8800,$0000,$0000,$0000,$0000,$00
02ac : 0000 0000 0000 0000 0000      word $0000,$0000,$0000,$0000,$0000,$0000,$f800,$00
02b4 : 4000 2000 1000 0000 0000      word $4000,$2000,$1000,$0000,$0000,$0000,$0000,$00
02bc : 0000 0000 7000 0800 7800      word $0000,$0000,$7000,$0800,$7800,$8800,$7800,$00
02c4 : 8000 8000 b000 c800 8800      word $8000,$8000,$b000,$c800,$8800,$8800,$f000,$00
02cc : 0000 0000 7000 8000 8000      word $0000,$0000,$7000,$8000,$8000,$8800,$7000,$00
02d4 : 0800 0800 6800 9800 8800      word $0800,$0800,$6800,$9800,$8800,$8800,$7800,$00
02dc : 0000 0000 7000 8800 f800      word $0000,$0000,$7000,$8800,$f800,$8000,$7000,$00
02e4 : 3000 4800 4000 e000 4000      word $3000,$4800,$4000,$e000,$4000,$4000,$4000,$00
02ec : 0000 7800 8800 8800 7800      word $0000,$7800,$8800,$8800,$7800,$0800,$7000,$00
02f4 : 8000 8000 b000 c800 8800      word $8000,$8000,$b000,$c800,$8800,$8800,$8800,$00
02fc : 2000 0000 6000 2000 2000      word $2000,$0000,$6000,$2000,$2000,$2000,$7000,$00
0304 : 1000 0000 3000 1000 1000      word $1000,$0000,$3000,$1000,$1000,$9000,$6000,$00
030c : 8000 8000 9000 a000 c000      word $8000,$8000,$9000,$a000,$c000,$a000,$9000,$00
0314 : 6000 2000 2000 2000 2000      word $6000,$2000,$2000,$2000,$2000,$2000,$7000,$00
031c : 0000 0000 d000 a800 a800      word $0000,$0000,$d000,$a800,$a800,$8800,$8800,$00
0324 : 0000 0000 b000 c800 8800      word $0000,$0000,$b000,$c800,$8800,$8800,$8800,$00
032c : 0000 0000 7000 8800 8800      word $0000,$0000,$7000,$8800,$8800,$8800,$7000,$00
0334 : 0000 0000 f000 8800 f000      word $0000,$0000,$f000,$8800,$f000,$8000,$8000,$00
033c : 0000 0000 6800 9800 7800      word $0000,$0000,$6800,$9800,$7800,$0800,$0800,$00
0344 : 0000 0000 b000 c800 8000      word $0000,$0000,$b000,$c800,$8000,$8000,$8000,$00
034c : 0000 0000 7000 8000 7000      word $0000,$0000,$7000,$8000,$7000,$0800,$f000,$00
0354 : 4000 4000 e000 4000 4000      word $4000,$4000,$e000,$4000,$4000,$4800,$3000,$00
035c : 0000 0000 8800 8800 8800      word $0000,$0000,$8800,$8800,$8800,$9800,$6800,$00
0364 : 0000 0000 8800 8800 8800      word $0000,$0000,$8800,$8800,$8800,$5000,$2000,$00
036c : 0000 0000 8800 a800 a800      word $0000,$0000,$8800,$a800,$a800,$a800,$5000,$00
0374 : 0000 0000 8800 5000 2000      word $0000,$0000,$8800,$5000,$2000,$5000,$8800,$00
037c : 0000 0000 8800 8800 7800      word $0000,$0000,$8800,$8800,$7800,$0800,$7000,$00
0384 : 0000 0000 f800 1000 2000      word $0000,$0000,$f800,$1000,$2000,$4000,$f800,$00
038c : 1000 2000 2000 4000 2000      word $1000,$2000,$2000,$4000,$2000,$2000,$1000,$00
0394 : 2000 2000 2000 2000 2000      word $2000,$2000,$2000,$2000,$2000,$2000,$2000,$00
039c : 4000 2000 2000 1000 2000      word $4000,$2000,$2000,$1000,$2000,$2000,$4000,$00
03a4 : 5000 a800 5000 a800 5000      word $5000,$a800,$5000,$a800,$5000,$a800,$5000,$00
03ac : fc00 fc00 fc00 fc00 fc00      word $fc00,$fc00,$fc00,$fc00,$fc00,$fc00,$fc00,$fc
03b4 :                               .osxfileoperation
03b4 : 20f0 fffe                     stm  r0,#$fffe
03b6 : afd0                          ret
03b7 :                               .bootprompt
03b7 : 003e 0f10 0c16 2a2a 202a      string "[10,0f,16,0c]*** eris retrocomputer ***[0d
03d7 :                               .kernelprompt
03d7 : 000d 654b 6e72 6c65 203a      string "kernel[3a] 0.93[0d]"
03df :                               .bootcode
03df : 7ee0                          clr  r14
03e0 : 00f0 4000                     mov  r0,#initialisedstart
03e2 : 01f0                          mov  r1,r15,#0
03e3 : 0068                          word  initialisedend-initialisedstart
03e4 :                               ._bcclear
03e4 : 2e00                          stm  r14,r0,#0
03e5 : 30e1                          inc  r0
03e6 : 51e1                          dec  r1
03e7 : b1e0                          skz  r1
03e8 : aff0 03e4                     jmp  #_bcclear
03ea : 00f0 4000                     mov  r0,#ramstart
03ec :                               ._bccheckmemory
03ec : 1100                          ldm  r1,r0,#0
03ed : 02f0 aaaa                     mov  r2,#$aaaa
03ef :                               ._bccheck2
03ef : 2200                          stm  r2,r0,#0
03f0 : 1300                          ldm  r3,r0,#0
03f1 : b230                          skeq  r2,r3,#0
03f2 : aff0 03fe                     jmp  #_bcfoundend
03f4 : 72f0 ffff                     xor  r2,#$ffff
03f6 : e2e0                          sksn  r2,r14,#0
03f7 : aff0 03ef                     jmp  #_bccheck2
03f9 : 2100                          stm  r1,r0,#0
03fa : 30f0 0100                     add  r0,#$100
03fc : aff0 03ec                     jmp  #_bccheckmemory
03fe :                               ._bcfoundend
03fe : 20f0 4001                     stm  r0,#highmemory
0400 : 50f0 0200                     sub  r0,#spritedefaultimagecount * 16
0402 : 60f0 fff0                     and  r0,#$fff0
0404 : 20f0 4003                     stm  r0,#spriteimagememory
0406 : 50f0 00c0                     sub  r0,#spriteobjectcount *spriterecordsize
0408 : 20f0 400e                     stm  r0,#spriteaddress
040a : 50f0 006f                     sub  r0,#sndrecordsize * sndchannels
040c : 20f0 4010                     stm  r0,#soundqueuebase
040e : 50f0 0636                     sub  r0,#(charwidth*charheight)
0410 : 20f0 4002                     stm  r0,#textmemory
0412 : 50e1                          dec  r0
0413 : 2e00                          stm  r14,r0,#0
0414 : 0c00                          mov  sp,r0,#0
0415 : 20f0 4068                     stm  r0,#randomseed
0417 : 01f0 4000                     mov  r1,#systemvariables
0419 : 00f0 4000                     mov  r0,#ramstart
041b : 2010                          stm  r0,r1,#0
041c : 00f0 0035                     mov  r0,#charwidth
041e : 2015                          stm  r0,r1,#5
041f : 00f0 001e                     mov  r0,#charheight
0421 : 2016                          stm  r0,r1,#6
0422 : 00f0 0020                     mov  r0,#spritedefaultimagecount
0424 : 2014                          stm  r0,r1,#4
0425 : 00f0 00b4                     mov  r0,#fontdatadefault
0427 : 2017                          stm  r0,r1,#7
0428 : 00f0 0020                     mov  r0,#spriteobjectcount
042a : 201f                          stm  r0,r1,#15
042b : 10f0 ff30                     ldm  r0,#hwtimer
042d : 20f0 4067                     stm  r0,#nextmanagerevent
042f : 00f0 0103                     mov  r0,#$0103
0431 : adf0 0038                     jsr  #ossetplanes
0433 : adf0 0052                     jsr  #osspritereset
0435 : 00f0 03b7                     mov  r0,#bootprompt
0437 : ade8                          jsr  #osprintstring
0438 : 10f0 4001                     ldm  r0,#highmemory
043a : 50f0 4000                     sub  r0,#ramstart
043c : 01ea                          mov  r1,#10
043d : adf0 0020                     jsr  #osinttostr
043f : ade8                          jsr  #osprintstring
0440 : ade6                          jsr  #osprintinline
0441 : 000d 7720 726f 7364 5220      string " words ram[0d,0d,12]"
0449 : 00f0 03d7                     mov  r0,#kernelprompt
044b : ade8                          jsr  #osprintstring
044c : adf0 0068                     jsr  #osresetallchannels
044e : 7000                          clr  r0
044f : adf0 0010                     jsr  #osfileoperation
0451 : 00e1                          mov  r0,#1
0452 : 01e6                          mov  r1,#6
0453 : 02f0 58c6                     mov  r2,#22726
0455 : 7330                          clr  r3
0456 : adf0 006c                     jsr  #ossoundplay
0458 : 00e1                          mov  r0,#1
0459 : 01e3                          mov  r1,#3
045a : 92e1                          ror  r2,#1
045b : adf0 006c                     jsr  #ossoundplay
045d : aff0 1200                     jmp  #kernelend
045f :                               .osxsystemmanager
045f : 10f0 ff30                     ldm  r0,#hwtimer
0461 : 1ef0 4067                     ldm  r14,#nextmanagerevent
0463 : 50e0                          sub  r0,r14,#0
0464 : 7ee0                          xor  r14,r14,#0
0465 : e0e0                          skm  r0
0466 : aff0 046a                     jmp  #_osxsmcode
0468 : 7000                          clr  r0
0469 : afd0                          ret
046a :                               ._osxsmcode
046a : 5ce2 21c0 2dc1                push  r1,link
046d : 11f0 ff30                     ldm  r1,#hwtimer
046f : 31e5                          add  r1,#timerrate
0470 : 21f0 4067                     stm  r1,#nextmanagerevent
0472 : 11f0 4074                     ldm  r1,#spritesenabled
0474 : b1e0                          skz  r1
0475 : adf0 0ce9                     jsr  #osxspriteupdate
0477 : adf0 0ee9                     jsr  #osiupdatesound
0479 : adf0 047f                     jsr  #osicheckbreak
047b : 11c0 1dc1 3ce2                pop  r1,link
047e : afd0                          ret
047f :                               .osicheckbreak
047f : 00f0 0020                     mov  r0,#$20
0481 : 20f0 ff00                     stm  r0,#keyboardport
0483 : 10f0 ff00                     ldm  r0,#keyboardport
0485 : 60f0 0010                     and  r0,#$10
0487 : c0e0                          sknz  r0
0488 : afd0                          ret
0489 : 00e8                          mov  r0,#$08
048a : 20f0 ff00                     stm  r0,#keyboardport
048c : 10f0 ff00                     ldm  r0,#keyboardport
048e : 60e1                          and  r0,#$01
048f : afd0                          ret
0490 :                               .osxdefinefkey
0490 : 5ce4 21c0 22c1 23c2 2dc3      push  r1,r2,r3,link
0495 : 50e1                          dec  r0
0496 : 0200                          mov  r2,r0,#0
0497 : 50e6                          sub  r0,#6
0498 : ffe0                          sklt
0499 : aff0 04b1                     jmp  #_osdferror
049b : 0010                          mov  r0,r1,#0
049c : adf0 0026                     jsr  #oswordlength
049e : 0300                          mov  r3,r0,#0
049f : 50ec                          sub  r0,#functionkeysize
04a0 : ffe0                          sklt
04a1 : aff0 04b1                     jmp  #_osdferror
04a3 : 82ec                          mult  r2,#functionkeysize
04a4 : 32f0 401f                     add  r2,#functionkeydefinitions
04a6 :                               ._osdfcopy
04a6 : 1011                          ldm  r0,r1,#1
04a7 : 2020                          stm  r0,r2,#0
04a8 : 31e1                          inc  r1
04a9 : 32e1                          inc  r2
04aa : 53e1                          dec  r3
04ab : b3e0                          skz  r3
04ac : aff0 04a6                     jmp  #_osdfcopy
04ae : 2e20                          stm  r14,r2,#0
04af : 7000                          clr  r0
04b0 : b0e0                          skz  r0
04b1 :                               ._osdferror
04b1 : 00e1                          mov  r0,#1
04b2 : 11c0 12c1 13c2 1dc3 3ce4      pop  r1,r2,r3,link
04b7 : afd0                          ret
04b8 :                               .osxcursorget
04b8 : 10f0 401d                     ldm  r0,#functionkeyqueue
04ba : b0e0                          skz  r0
04bb : aff0 04f7                     jmp  #_oscgfunctionkey
04bd :                               ._oscgkeyboard
04bd : 2ef0 401d                     stm   r14,#functionkeyqueue
04bf : 5ce3 21c0 22c1 2dc2           push  r1,r2,link
04c3 : 7220                          clr  r2
04c4 :                               ._oscgloop
04c4 : 10f0 ff30                     ldm  r0,#hwtimer
04c6 : 90e6                          ror  r0,#6
04c7 : d020                          skse  r0,r2,#0
04c8 : adf0 04e3                     jsr  #_oscgsetcursorblock
04ca : adf0 002a                     jsr  #osgetkeyboard
04cc : c0e0                          sknz  r0
04cd : aff0 04c4                     jmp  #_oscgloop
04cf : 5ce1 20c0                     push  r0
04d1 : 7000                          clr  r0
04d2 : adf0 04e3                     jsr  #_oscgsetcursorblock
04d4 : 10c0 3ce1                     pop  r0
04d6 : 0100                          mov  r1,r0,#0
04d7 : 61f0 00f8                     and  r1,#$f8
04d9 : 71f0 00f0                     xor  r1,#$f0
04db : c1e0                          sknz  r1
04dc : adf0 0510                     jsr  #_oscgexpandfunctionkey
04de : 11c0 12c1 1dc2 3ce3           pop  r1,r2,link
04e2 : afd0                          ret
04e3 :                               ._oscgsetcursorblock
04e3 : 5ce1 2dc0                     push  link
04e5 : 0200                          mov  r2,r0,#0
04e6 : adf0 0b0f                     jsr  #_oscurrenttextr1
04e8 : 1010                          ldm  r0,r1,#0
04e9 : e2e0                          skm  r2
04ea : aff0 04f0                     jmp  #_osscgscbshow
04ec : 60f0 f000                     and  r0,#$f000
04ee : 30f0 077e                     add  r0,#$077e
04f0 :                               ._osscgscbshow
04f0 : adf0 0b1e                     jsr  #_ossetchardrawpos
04f2 : adf0 09b5                     jsr  #osidrawsolidcharacter
04f4 : 1dc0 3ce1                     pop  link
04f6 : afd0                          ret
04f7 :                               ._oscgfunctionkey
04f7 : 5ce2 21c0 22c1                push  r1,r2
04fa : 1100                          ldm  r1,r0,#0
04fb : 12f0 401e                     ldm  r2,#functionkeybyte
04fd : b2e0                          skz  r2
04fe : 91e8                          ror  r1,#8
04ff : b2e0                          skz  r2
0500 : 30e1                          inc  r0
0501 : 72e1                          xor  r2,#1
0502 : 22f0 401e                     stm  r2,#functionkeybyte
0504 : 20f0 401d                     stm  r0,#functionkeyqueue
0506 : 61f0 00ff                     and  r1,#$ff
0508 : 0010                          mov  r0,r1,#0
0509 : 11c0 12c1 3ce2                pop  r1,r2
050c : c0e0                          sknz  r0
050d : aff0 04bd                     jmp  #_oscgkeyboard
050f : afd0                          ret
0510 :                               ._oscgexpandfunctionkey
0510 : 5ce1 2dc0                     push  link
0512 : 60e7                          and  r0,#7
0513 : 80ec                          mult  r0,#functionkeysize
0514 : 30f0 401f                     add  r0,#functionkeydefinitions
0516 : 20f0 401d                     stm  r0,#functionkeyqueue
0518 : 2ef0 401e                     stm  r14,#functionkeybyte
051a : adf0 04b8                     jsr  #osxcursorget
051c :                               ._oscgexit1
051c : 1dc0 3ce1                     pop  link
051e : afd0                          ret
051f :                               .osxgetkeyboard
051f : 5ce6 21c0 22c1 23c2 24c3      push  r1,r2,r3,r4,r5,link
0526 : adf0 0028                     jsr  #ossystemmanager
0528 : 01f0 0098                     mov  r1,#keyboardmapping+5*8
052a : 02f0 401b                     mov  r2,#currentrowstatus+5
052c : 03f0 0020                     mov  r3,#$20
052e : 7440                          clr  r4
052f :                               ._gkscan
052f : 23f0 ff00                     stm  r3,#keyboardport
0531 : 00ef                          mov  r0,#$0f
0532 :                               ._gkdebounce
0532 : 50e1                          dec  r0
0533 : b0e0                          skz  r0
0534 : aff0 0532                     jmp  #_gkdebounce
0536 : 15f0 ff00                     ldm  r5,#keyboardport
0538 : 65f0 3fff                     and  r5,#$3fff
053a : 3450                          add  r4,r5,#0
053b : 1020                          ldm  r0,r2,#0
053c : 2520                          stm  r5,r2,#0
053d : 70f0 ffff                     xor  r0,#$ffff
053f : 6050                          and  r0,r5,#0
0540 : b0e0                          skz  r0
0541 : aff0 0565                     jmp  #_gkkeypressed
0543 : 51e8                          sub  r1,#8
0544 : 52e1                          dec  r2
0545 : 93e1                          ror  r3,#1
0546 : e3e0                          skm  r3
0547 : aff0 052f                     jmp  #_gkscan
0549 :                               ._gknokeypressed
0549 : 7000                          clr  r0
054a : c4e0                          sknz  r4
054b : 2ef0 4015                     stm  r14,#currentkey
054d : c4e0                          sknz r4
054e : aff0 055d                     jmp  #_gkexitwithr0
0550 : 11f0 ff30                     ldm  r1,#hwtimer
0552 : 12f0 401c                     ldm  r2,#keyrepeattime
0554 : 5210                          sub  r2,r1,#0
0555 : e2e0                          skm  r2
0556 : aff0 055d                     jmp  #_gkexitwithr0
0558 : 31ea                          add  r1,#repeatspeed
0559 : 21f0 401c                     stm  r1,#keyrepeattime
055b : 10f0 4015                     ldm  r0,#currentkey
055d :                               ._gkexitwithr0
055d : 11c0 12c1 13c2 14c3 15c4      pop  r1,r2,r3,r4,r5,link
0564 : afd0                          ret
0565 :                               ._gkkeypressed
0565 : 02f0 ffff                     mov  r2,#-1
0567 :                               ._gkfindbitnumber
0567 : 32e1                          inc  r2
0568 : 90e1                          ror  r0,#1
0569 : e0e0                          skm   r0
056a : aff0 0567                     jmp  #_gkfindbitnumber
056c : 92e1                          ror  r2,#1
056d : 0020                          mov  r0,r2,#0
056e : 60ef                          and  r0,#15
056f : 3010                          add  r0,r1,#0
0570 : 1000                          ldm  r0,r0,#0
0571 : d2e0                          skp  r2
0572 : 90e8                          ror  r0,#8
0573 : 60f0 00ff                     and  r0,#$ff
0575 : c0e0                          sknz  r0
0576 : aff0 0549                     jmp  #_gknokeypressed
0578 : 11f0 ff30                     ldm  r1,#hwtimer
057a : 31f0 0050                     add  r1,#repeatdelay
057c : 21f0 401c                     stm  r1,#keyrepeattime
057e : 11f0 401b                     ldm  r1,#currentrowstatus+5
0580 : 91e5                          ror  r1,#5
0581 : d1e0                          skp  r1
0582 : adf0 058c                     jsr  #_gkcontrol
0584 : 91e1                          ror  r1,#1
0585 : d1e0                          skp  r1
0586 : adf0 059e                     jsr  #_gkshiftexecute
0588 : 20f0 4015                     stm  r0,#currentkey
058a : aff0 055d                     jmp  #_gkexitwithr0
058c :                               ._gkcontrol
058c : 0200                          mov  r2,r0,#0
058d : 60f0 001f                     and  r0,#$1f
058f : 62f0 00f8                     and  r2,#$00f8
0591 : 72f0 0030                     xor  r2,#$0030
0593 : b2e0                          skz  r2
0594 : afd0                          ret
0595 : 0200                          mov  r2,r0,#0
0596 : c2e0                          sknz  r2
0597 : afd0                          ret
0598 : 72e7                          xor  r2,#7
0599 : c2e0                          sknz  r2
059a : afd0                          ret
059b : 30f0 00df                     add  r0,#$df
059d : afd0                          ret
059e :                               ._gkshiftexecute
059e : 0100                          mov  r1,r0,#0
059f : 51f0 0061                     sub  r1,#97
05a1 : ffe1                          skge
05a2 : aff0 05ac                     jmp  #_gknotalpha
05a4 : 51f0 001a                     sub  r1,#26
05a6 : ffe0                          sklt
05a7 : aff0 05ac                     jmp  #_gknotalpha
05a9 : 50f0 0020                     sub  r0,#32
05ab : afd0                          ret
05ac :                               ._gknotalpha
05ac : 02f0 00a0                     mov  r2,#shifttable
05ae :                               ._gkshiftloop
05ae : 1120                          ldm  r1,r2,#0
05af : 91e8                          ror  r1,#8
05b0 : 7100                          xor  r1,r0,#0
05b1 : 61f0 00ff                     and  r1,#$00ff
05b3 : c1e0                          sknz  r1
05b4 : aff0 05bc                     jmp  #_gkshiftfound
05b6 : 32e1                          inc  r2
05b7 : 1120                          ldm  r1,r2,#0
05b8 : b1e0                          skz  r1
05b9 : aff0 05ae                     jmp  #_gkshiftloop
05bb : afd0                          ret
05bc :                               ._gkshiftfound
05bc : 1020                          ldm  r0,r2,#0
05bd : 60f0 00ff                     and  r0,#$00ff
05bf : afd0                          ret
05c0 :                               .osxinputlimit
05c0 : 5ce5 20c0 21c1 22c2 23c3      push  r0,r1,r2,r3,link
05c6 : 0200                          mov  r2,r0,#0
05c7 : 2e20                          stm  r14,r2,#0
05c8 :                               ._osliloop
05c8 : adf0 002c                     jsr  #oscursorget
05ca : 0300                          mov  r3,r0,#0
05cb : 70ed                          xor  r0,#13
05cc : c0e0                          sknz  r0
05cd : aff0 05f4                     jmp  #_osliexit
05cf : 70e5                          xor  r0,#13^8
05d0 : c0e0                          sknz  r0
05d1 : aff0 05e6                     jmp  #_oslibackspace
05d3 : 60f0 00e0                     and   r0,#$00e0
05d5 : c0e0                          sknz  r0
05d6 : aff0 05c8                     jmp  #_osliloop
05d8 : 1020                          ldm  r0,r2,#0
05d9 : 7010                          xor  r0,r1,#0
05da : c0e0                          sknz  r0
05db : aff0 05c8                     jmp  #_osliloop
05dd : 0030                          mov  r0,r3,#0
05de : ade4                          jsr  #osprintcharacter
05df : adf0 05fd                     jsr  #_osliwritecurrent
05e1 : 1020                          ldm  r0,r2,#0
05e2 : 30e1                          inc  r0
05e3 : 2020                          stm  r0,r2,#0
05e4 : aff0 05c8                     jmp  #_osliloop
05e6 :                               ._oslibackspace
05e6 : 1020                          ldm  r0,r2,#0
05e7 : c0e0                          sknz  r0
05e8 : aff0 05c8                     jmp  #_osliloop
05ea : 00e8                          mov  r0,#8
05eb : ade4                          jsr  #osprintcharacter
05ec : 1020                          ldm  r0,r2,#0
05ed : 50e1                          dec  r0
05ee : 2020                          stm  r0,r2,#0
05ef : 7000                          clr  r0
05f0 : adf0 05fd                     jsr  #_osliwritecurrent
05f2 : aff0 05c8                     jmp  #_osliloop
05f4 :                               ._osliexit
05f4 : 00ed                          mov  r0,#13
05f5 : ade4                          jsr  #osprintcharacter
05f6 : 10c0 11c1 12c2 13c3 1dc4      pop  r0,r1,r2,r3,link
05fc : afd0                          ret
05fd :                               ._osliwritecurrent
05fd : 5ce3 20c0 21c1 23c2           push  r0,r1,r3
0601 : 1120                          ldm  r1,r2,#0
0602 : 91e1                          ror  r1,#1
0603 : 0310                          mov  r3,r1,#0
0604 : 61f0 7fff                     and  r1,#$7fff
0606 : 3121                          add  r1,r2,#1
0607 : e3e0                          skm  r3
0608 : aff0 060f                     jmp  #_osliwriteexit
060a : 1310                          ldm  r3,r1,#0
060b : 63f0 00ff                     and  r3,#$00ff
060d : 90e8                          ror  r0,#8
060e : 3030                          add  r0,r3,#0
060f :                               ._osliwriteexit
060f : 2010                          stm  r0,r1,#0
0610 : 10c0 11c1 13c2 3ce3           pop  r0,r1,r3
0614 : afd0                          ret
0615 :                               .osxlineinput
0615 : 5ce2 21c0 2dc1                push  r1,link
0618 : 7000                          clr  r0
0619 :                               ._osxliedit
0619 : ade4                          jsr  #osprintcharacter
061a : adf0 002c                     jsr  #oscursorget
061c : 0100                          mov  r1,r0,#0
061d : 51ed                          sub  r1,#13
061e : b1e0                          skz  r1
061f : aff0 0619                     jmp  #_osxliedit
0621 : 00ee                          mov  r0,#14
0622 : adf0 0a00                     jsr  #osxprintcharacter
0624 : adf0 0b0f                     jsr  #_oscurrenttextr1
0626 : 0010                          mov  r0,r1,#0
0627 :                               ._osxlifindstart
0627 : 50f0 0035                     sub  r0,#charwidth
0629 : 0100                          mov  r1,r0,#0
062a : 51e1                          dec  r1
062b : 1110                          ldm  r1,r1,#0
062c : 61f0 00ff                     and  r1,#$00ff
062e : b1e0                          skz  r1
062f : aff0 0627                     jmp  #_osxlifindstart
0631 : 5ce1 20c0                     push  r0
0633 : 00e3                          mov  r0,#3
0634 : adf0 0a00                     jsr  #osxprintcharacter
0636 :                               ._osxlifindend
0636 : adf0 0b0f                     jsr  #_oscurrenttextr1
0638 : 31f0 0034                     add  r1,#charwidth-1
063a : 1110                          ldm  r1,r1,#0
063b : 61f0 00ff                     and  r1,#$00ff
063d : c1e0                          sknz  r1
063e : aff0 0645                     jmp  #_osxliexit
0640 : 00ee                          mov  r0,#14
0641 : adf0 0a00                     jsr  #osxprintcharacter
0643 : aff0 0636                     jmp  #_osxlifindend
0645 :                               ._osxliexit
0645 : 00ee                          mov  r0,#14
0646 : adf0 0a00                     jsr  #osxprintcharacter
0648 : 10c0 3ce1                     pop  r0
064a : 11c0 1dc1 3ce2                pop  r1,link
064d : afd0                          ret
064e :                               .osxreadjoystick
064e : 00f0 0020                     mov  r0,#$20
0650 : 20f0 ff00                     stm  r0,#keyboardport
0652 :                               ._osxrjdelay
0652 : 50e1                          dec  r0
0653 : b0e0                          skz  r0
0654 : aff0 0652                     jmp  #_osxrjdelay
0656 : 10f0 ff00                     ldm  r0,#keyboardport
0658 : 60f0 003f                     and  r0,#$003f
065a : afd0                          ret
065b :                               .osxwaitblitter
065b : 5ce1 20c0                     push  r0
065d :                               ._osxwbloop
065d : 10f0 ff20                     ldm  r0,#blitterstatus
065f : d0e0                          skp  r0
0660 : aff0 065d                     jmp  #_osxwbloop
0662 : 10c0 3ce1                     pop  r0
0664 : afd0                          ret
0665 :                               .osiclearscreen
0665 : 5ce3 20c0 21c1 2dc2           push  r0,r1,link
0669 : 10f0 400d                     ldm  r0,#bgrcolour
066b : 11f0 4011                     ldm  r1,#colourmask
066d : 91e8                          ror  r1,#8
066e : 3010                          add  r0,r1,#0
066f : adf0 0676                     jsr  #osifillscreen
0671 : 10c0 11c1 1dc2 3ce3           pop  r0,r1,link
0675 : afd0                          ret
0676 :                               .osifillscreen
0676 : 5ce3 20c0 21c1 2dc2           push  r0,r1,link
067a : ade2                          jsr  #oswaitblitter
067b : 20f0 ff23                     stm  r0,#blittercmask
067d : 00f0 0696                     mov  r0,#_osfsbar
067f : 20f0 ff22                     stm  r0,#blitterdata
0681 : 01f0 0130                     mov  r1,#pixelwidth-16
0683 :                               ._osifillloop
0683 : ade2                          jsr  #oswaitblitter
0684 : 21f0 ff20                     stm  r1,#blitterx
0686 : 2ef0 ff21                     stm  r14,#blittery
0688 : 00f0 80f0                     mov  r0,#$8000+pixelheight
068a : 20f0 ff24                     stm  r0,#blittercmd
068c : 51f0 0010                     sub  r1,#16
068e : e1e0                          skm  r1
068f : aff0 0683                     jmp  #_osifillloop
0691 : 10c0 11c1 1dc2 3ce3           pop  r0,r1,link
0695 : afd0                          ret
0696 :                               ._osfsbar
0696 : ffff                          word  $ffff
0697 :                               .osxsetplanes
0697 : 5ce5 20c0 21c1 22c2 23c3      push  r0,r1,r2,r3,link
069d : 0100                          mov  r1,r0,#0
069e : 60f0 00ff                     and  r0,#$00ff
06a0 : 70ef                          xor  r0,#15
06a1 : 30e1                          inc  r0
06a2 : 60ef                          and  r0,#15
06a3 : 20f0 4013                     stm  r0,#spriterotate
06a5 : 02e1                          mov  r2,#1
06a6 : 9200                          ror  r2,r0,#0
06a7 : 62f0 00ff                     and  r2,#$ff
06a9 : b2e0                          skz  r2
06aa : 52e1                          dec  r2
06ab : 22f0 4011                     stm  r2,#colourmask
06ad : 61f0 ff00                     and  r1,#$ff00
06af : 91e8                          ror  r1,#8
06b0 : 71ef                          xor  r1,#15
06b1 : 31e1                          inc  r1
06b2 : 02e1                          mov  r2,#1
06b3 : 9210                          ror  r2,r1,#0
06b4 : 62f0 00ff                     and  r2,#$ff
06b6 : b2e0                          skz  r2
06b7 : 52e1                          dec  r2
06b8 : 0320                          mov  r3,r2,#0
06b9 : 9200                          ror  r2,r0,#0
06ba : 22f0 4012                     stm  r2,#spritemask
06bc : 10f0 4011                     ldm  r0,#colourmask
06be : c0e0                          sknz  r0
06bf : aff0 06c9                     jmp  #_spsetbgrend
06c1 :                               ._spsetbgrall
06c1 : 0100                          mov  r1,r0,#0
06c2 : 61e7                          and  r1,#7
06c3 : adf0 003e                     jsr  #ossetbackplanepalette
06c5 : 50e1                          dec  r0
06c6 : e0e0                          skm  r0
06c7 : aff0 06c1                     jmp  #_spsetbgrall
06c9 :                               ._spsetbgrend
06c9 : c3e0                          sknz  r3
06ca : aff0 06d5                     jmp  #_spsetfgrend
06cc :                               ._spsetfgrall
06cc : 0030                          mov  r0,r3,#0
06cd : 0130                          mov  r1,r3,#0
06ce : 61e7                          and  r1,#7
06cf : adf0 0040                     jsr  #ossetfrontplanepalette
06d1 : 53e1                          dec  r3
06d2 : e3e0                          skm  r3
06d3 : aff0 06cc                     jmp  #_spsetfgrall
06d5 :                               ._spsetfgrend
06d5 : 00f0 ff00                     mov  r0,#$ff00
06d7 : adf0 0676                     jsr  #osifillscreen
06d9 : 10c0 11c1 12c2 13c3 1dc4      pop  r0,r1,r2,r3,link
06df : afd0                          ret
06e0 :                               .osxsetbackplanepalette
06e0 : 5ce3 20c0 21c1 22c2           push  r0,r1,r2
06e4 : 0200                          mov  r2,r0,#0
06e5 : 92e8                          ror  r2,#8
06e6 : 61f0 003f                     and  r1,#$3f
06e8 : 3210                          add  r2,r1,#0
06e9 : 11f0 4011                     ldm  r1,#colourmask
06eb : 31e1                          inc  r1
06ec : 5010                          sub  r0,r1,#0
06ed : ffe1                          skge
06ee : 22f0 ff10                     stm  r2,#paletteregister
06f0 : 10c0 11c1 12c2 3ce3           pop  r0,r1,r2
06f4 : afd0                          ret
06f5 :                               .osxsetfrontplanepalette
06f5 : c0e0                          sknz  r0
06f6 : afd0                          ret
06f7 : 5ce4 20c0 21c1 22c2 23c3      push  r0,r1,r2,r3
06fc : 13f0 4013                     ldm  r3,#spriterotate
06fe : 9030                          ror  r0,r3,#0
06ff : 12f0 4012                     ldm  r2,#spritemask
0701 : 5200                          sub  r2,r0,#0
0702 : d2e0                          skp  r2
0703 : aff0 0713                     jmp  #_ossfppexit
0705 : 90e8                          ror  r0,#8
0706 : 61f0 003f                     and  r1,#$3f
0708 : 3010                          add  r0,r1,#0
0709 : 02e1                          mov  r2,#1
070a : 9230                          ror  r2,r3,#0
070b :                               ._ossfpploop
070b : 20f0 ff10                     stm  r0,#paletteregister
070d : 30f0 0100                     add  r0,#$100
070f : 52e1                          dec  r2
0710 : b2e0                          skz  r2
0711 : aff0 070b                     jmp  #_ossfpploop
0713 :                               ._ossfppexit
0713 : 10c0 11c1 12c2 13c3 3ce4      pop  r0,r1,r2,r3
0718 : afd0                          ret
0719 :                               .osxsetactiveplane
0719 : 5ce1 20c0                     push r0
071b : 60e1                          and  r0,#1
071c : 20f0 4014                     stm  r0,#activeplane
071e : 10c0 3ce1                     pop  r0
0720 : afd0                          ret
0721 :                               .osxsetinkcolourmask
0721 : 5ce4 20c0 21c1 22c2 2dc3      push  r0,r1,r2,link
0726 : ade2                          jsr  #oswaitblitter
0727 : 12f0 4014                     ldm  r2,#activeplane
0729 : 10f0 4011                     ldm  r0,#colourmask
072b : b2e0                          skz  r2
072c : 10f0 4012                     ldm  r0,#spritemask
072e : 90e8                          ror  r0,#8
072f : 11f0 400c                     ldm  r1,#fgrcolour
0731 : c2e0                          sknz  r2
0732 : aff0 0737                     jmp  #_osisicmbuild
0734 : 12f0 4013                     ldm  r2,#spriterotate
0736 : 9120                          ror  r1,r2,#0
0737 :                               ._osisicmbuild
0737 : 3010                          add  r0,r1,#0
0738 : 20f0 ff23                     stm  r0,#blittercmask
073a : 10c0 11c1 12c2 1dc3 3ce4      pop  r0,r1,r2,link
073f : afd0                          ret
0740 :                               .osxdrawellipse
0740 : 5ce1 24c0                     push  r4
0742 : 04e1                          mov  r4,#1
0743 : aff0 0748                     jmp  #_osxellipsecommand
0745 :                               .osxfillellipse
0745 : 5ce1 24c0                     push  r4
0747 : 7440                          clr  r4
0748 :                               ._osxellipsecommand
0748 : 5ceb 20c0 21c1 22c2 23c3      push  r0,r1,r2,r3,r5,r6,r7,r8,r9,r10,link
0754 : adf0 003c                     jsr  #ossetinkcolourmask
0756 : adf0 0912                     jsr  #osigraphicboxcoordinates
0758 : 3020                          add  r0,r2,#0
0759 : 90e1                          ror  r0,#1
075a : 60f0 7fff                     and  r0,#$7fff
075c : 3130                          add  r1,r3,#0
075d : 91e1                          ror  r1,#1
075e : 61f0 7fff                     and  r1,#$7fff
0760 : 5200                          sub  r2,r0,#0
0761 : 5310                          sub  r3,r1,#0
0762 : c2e0                          sknz r2
0763 : aff0 078e                     jmp  #_osxellipseexit
0765 : c3e0                          sknz  r3
0766 : aff0 078e                     jmp  #_osxellipseexit
0768 : 5ce2 20c0 21c1                push  r0,r1
076b : 0020                          mov  r0,r2,#0
076c : 90e8                          ror  r0,#8
076d : 0130                          mov  r1,r3,#0
076e : adf0 0014                     jsr  #osudivide16
0770 : 0200                          mov  r2,r0,#0
0771 : 10c0 11c1 3ce2                pop  r0,r1
0774 : 09e1                          mov  r9,#1
0775 : 5930                          sub  r9,r3,#0
0776 : 7770                          clr  r7
0777 : 7880                          clr  r8
0778 : 5830                          sub  r8,r3,#0
0779 : 5830                          sub  r8,r3,#0
077a : 7550                          clr  r5
077b : 0630                          mov  r6,r3,#0
077c :                               ._osxellipseloop
077c : adf0 079d                     jsr  #_osxdrawandflip
077e : 0a50                          mov  r10,r5,#0
077f : 5a60                          sub  r10,r6,#0
0780 : ffe0                          sklt
0781 : aff0 078e                     jmp  #_osxellipseexit
0783 : d9e0                          skp  r9
0784 : aff0 0789                     jmp  #_osxellipseendf
0786 : 56e1                          dec  r6
0787 : 38e2                          add  r8,#2
0788 : 3980                          add  r9,r8,#0
0789 :                               ._osxellipseendf
0789 : 35e1                          inc  r5
078a : 37e2                          add  r7,#2
078b : 3971                          add  r9,r7,#1
078c : aff0 077c                     jmp  #_osxellipseloop
078e :                               ._osxellipseexit
078e : 10c0 11c1 12c2 13c3 15c4      pop  r0,r1,r2,r3,r5,r6,r7,r8,r9,r10,link
079a : 14c0 3ce1                     pop  r4
079c : afd0                          ret
079d :                               ._osxdrawandflip
079d : 5ce1 2dc0                     push  link
079f : adf0 07a7                     jsr  #_osescalexdrawandswap
07a1 : adf0 07a7                     jsr  #_osescalexdrawandswap
07a3 : 1dc0 3ce1                     pop  link
07a5 : afd0                          ret
07a6 : 0000                          break
07a7 :                               ._osescalexdrawandswap
07a7 : 5ce1 2dc0                     push  link
07a9 : 5ce1 25c0                     push  r5
07ab : 8520                          mult  r5,r2,#0
07ac : 95e8                          ror  r5,#8
07ad : 65f0 00ff                     and  r5,#$00ff
07af : adf0 07be                     jsr  #_osedrawandflipy
07b1 : adf0 07be                     jsr  #_osedrawandflipy
07b3 : 15c0 3ce1                     pop  r5
07b5 : adf0 07ba                     jsr  #_oseswapxy
07b7 : 1dc0 3ce1                     pop  link
07b9 : afd0                          ret
07ba :                               ._oseswapxy
07ba : 0a50                          mov  r10,r5,#0
07bb : 0560                          mov  r5,r6,#0
07bc : 06a0                          mov  r6,r10,#0
07bd : afd0                          ret
07be :                               ._osedrawandflipy
07be : 5ce1 2dc0                     push  link
07c0 : b4e0                          skz  r4
07c1 : adf0 07f1                     jsr  #_osedrawpixelpair
07c3 : c4e0                          sknz  r4
07c4 : adf0 07cc                     jsr  #_osedrawline
07c6 : 76f0 ffff                     xor  r6,#$ffff
07c8 : 36e1                          inc  r6
07c9 : 1dc0 3ce1                     pop  link
07cb : afd0                          ret
07cc :                               ._osedrawline
07cc : 5ce7 20c0 21c1 22c2 23c3      push  r0,r1,r2,r3,r4,r5,link
07d4 : 3160                          add  r1,r6,#0
07d5 : 0310                          mov  r3,r1,#0
07d6 : 0400                          mov  r4,r0,#0
07d7 : 5050                          sub  r0,r5,#0
07d8 : 3450                          add  r4,r5,#0
07d9 : 0240                          mov  r2,r4,#0
07da : 22f0 400a                     stm  r2,#xgraphic
07dc : 23f0 400b                     stm  r3,#ygraphic
07de : d0e0                          skp  r0
07df : 7000                          clr  r0
07e0 : d1e0                          skp  r1
07e1 : 7110                          clr  r1
07e2 : d2e0                          skp  r2
07e3 : 7220                          clr  r2
07e4 : d3e0                          skp  r3
07e5 : 7330                          clr  r3
07e6 : adf0 004a                     jsr  #osfillrectangle
07e8 : 10c0 11c1 12c2 13c3 14c4      pop  r0,r1,r2,r3,r4,r5,link
07f0 : afd0                          ret
07f1 :                               ._osedrawpixelpair
07f1 : 5ce1 2dc0                     push  link
07f3 : adf0 07fa                     jsr  #_osedrawpixelflipx
07f5 : adf0 07fa                     jsr  #_osedrawpixelflipx
07f7 : 1dc0 3ce1                     pop  link
07f9 : afd0                          ret
07fa :                               ._osedrawpixelflipx
07fa : 5ce1 2dc0                     push  link
07fc : ade2                          jsr  #oswaitblitter
07fd : 0a50                          mov  r10,r5,#0
07fe : 3a00                          add  r10,r0,#0
07ff : dae0                          skp  r10
0800 : 7aa0                          clr  r10
0801 : 2af0 ff20                     stm  r10,#blitterx
0803 : 0a60                          mov  r10,r6,#0
0804 : 3a10                          add  r10,r1,#0
0805 : dae0                          skp  r10
0806 : 7aa0                          clr  r10
0807 : 2af0 ff21                     stm  r10,#blittery
0809 : 0af0 0816                     mov  r10,#_osxellipsepixel
080b : 2af0 ff22                     stm  r10,#blitterdata
080d : 0ae1                          mov  r10,#1
080e : 2af0 ff24                     stm  r10,#blittercmd
0810 : 75f0 ffff                     xor  r5,#$ffff
0812 : 35e1                          inc  r5
0813 : 1dc0 3ce1                     pop  link
0815 : afd0                          ret
0816 :                               ._osxellipsepixel
0816 : 8000                          word  $8000
0817 :                               .osxdrawrectangle
0817 : 5ce5 20c0 21c1 22c2 23c3      push  r0,r1,r2,r3,link
081d : adf0 003c                     jsr  #ossetinkcolourmask
081f : adf0 0912                     jsr  #osigraphicboxcoordinates
0821 : 5ce2 20c0 21c1                push  r0,r1
0824 : adf0 08d0                     jsr  #osxgraphicsmove
0826 : 0020                          mov  r0,r2,#0
0827 : adf0 083f                     jsr  #osxdrawline
0829 : 0130                          mov  r1,r3,#0
082a : adf0 083f                     jsr  #osxdrawline
082c : 10c0 11c1 3ce2                pop  r0,r1
082f : adf0 08d0                     jsr  #osxgraphicsmove
0831 : 0130                          mov  r1,r3,#0
0832 : adf0 083f                     jsr  #osxdrawline
0834 : 0020                          mov  r0,r2,#0
0835 : adf0 083f                     jsr  #osxdrawline
0837 : 10c0 11c1 12c2 13c3 1dc4      pop  r0,r1,r2,r3,link
083d : aff0 08d0                     jmp  #graphicssaveexit
083f :                               .osxdrawline
083f : 5ceb 20c0 21c1 22c2 23c3      push  r0,r1,r2,r3,r4,r5,r6,r7,r8,r9,link
084b : adf0 003c                     jsr  #ossetinkcolourmask
084d : 04f0 08b6                     mov  r4,#_osdlpixel
084f : 24f0 ff22                     stm  r4,#blitterdata
0851 : 12f0 400a                     ldm  r2,#xgraphic
0853 : 13f0 400b                     ldm  r3,#ygraphic
0855 : 0430                          mov  r4,r3,#0
0856 : 5410                          sub  r4,r1,#0
0857 : ffe0                          sklt
0858 : aff0 0860                     jmp  #_osxdrawlinenoswap
085a : 0400                          mov  r4,r0,#0
085b : 0020                          mov  r0,r2,#0
085c : 0240                          mov  r2,r4,#0
085d : 0410                          mov  r4,r1,#0
085e : 0130                          mov  r1,r3,#0
085f : 0340                          mov  r3,r4,#0
0860 :                               ._osxdrawlinenoswap
0860 : 0420                          mov  r4,r2,#0
0861 : 5400                          sub  r4,r0,#0
0862 : 0510                          mov  r5,r1,#0
0863 : 5530                          sub  r5,r3,#0
0864 : c4e0                          sknz  r4
0865 : aff0 089a                     jmp  #_osxdrawlineoptimise
0867 : c5e0                          sknz  r5
0868 : aff0 089a                     jmp  #_osxdrawlineoptimise
086a : 09e1                          mov  r9,#1
086b : 0240                          mov  r2,r4,#0
086c : 7330                          clr  r3
086d : 5350                          sub  r3,r5,#0
086e : e2e0                          skm  r2
086f : aff0 0876                     jmp  #_osxnotflipped
0871 : 7440                          clr  r4
0872 : 5420                          sub  r4,r2,#0
0873 : 0240                          mov  r2,r4,#0
0874 : 09f0 ffff                     mov  r9,#-1
0876 :                               ._osxnotflipped
0876 : 0640                          mov  r6,r4,#0
0877 : 3650                          add  r6,r5,#0
0878 :                               ._osxdrawlineloop
0878 : ade2                          jsr  #oswaitblitter
0879 : 20f0 ff20                     stm  r0,#blitterx
087b : 21f0 ff21                     stm  r1,#blittery
087d : 07f0 8001                     mov  r7,#$8001
087f : 27f0 ff24                     stm  r7,#blittercmd
0881 : 0720                          mov  r7,r2,#0
0882 : 3730                          add  r7,r3,#0
0883 : c7e0                          sknz  r7
0884 : aff0 08a8                     jmp  #_osxdrawlineexit
0886 :                               ._osxdrawlineadjust
0886 : 0760                          mov  r7,r6,#0
0887 : 3770                          add  r7,r7,#0
0888 : 0870                          mov  r8,r7,#0
0889 : 5750                          sub  r7,r5,#0
088a : d7e0                          skp  r7
088b : aff0 0890                     jmp  #_osxdla1
088d : 3650                          add  r6,r5,#0
088e : 3090                          add  r0,r9,#0
088f : 52e1                          dec  r2
0890 :                               ._osxdla1
0890 : 0740                          mov  r7,r4,#0
0891 : 5780                          sub  r7,r8,#0
0892 : d7e0                          skp  r7
0893 : aff0 0898                     jmp  #_osxdla2
0895 : 3640                          add  r6,r4,#0
0896 : 31e1                          inc  r1
0897 : 53e1                          dec  r3
0898 :                               ._osxdla2
0898 : aff0 0878                     jmp  #_osxdrawlineloop
089a :                               ._osxdrawlineoptimise
089a : 10c0 11c1 12c2 13c3 14c4      pop  r0,r1,r2,r3,r4,r5,r6,r7,r8,r9,link
08a6 : aff0 004a                     jmp  #osfillrectangle
08a8 :                               ._osxdrawlineexit
08a8 : 10c0 11c1 12c2 13c3 14c4      pop  r0,r1,r2,r3,r4,r5,r6,r7,r8,r9,link
08b4 : aff0 08d0                     jmp  #graphicssaveexit
08b6 :                               ._osdlpixel
08b6 : 8000                          word $8000
08b7 :                               .osxplotpixel
08b7 : 5ce2 20c0 2dc1                push  r0,link
08ba : 20f0 400a                     stm  r0,#xgraphic
08bc : 21f0 400b                     stm  r1,#ygraphic
08be : adf0 003c                     jsr  #ossetinkcolourmask
08c0 : 20f0 ff20                     stm  r0,#blitterx
08c2 : 21f0 ff21                     stm  r1,#blittery
08c4 : 00f0 08cf                     mov  r0,#_osxppdata
08c6 : 20f0 ff22                     stm   r0,#blitterdata
08c8 : 00e1                          mov  r0,#1
08c9 : 20f0 ff24                     stm  r0,#blittercmd
08cb : 10c0 1dc1 3ce2                pop  r0,link
08ce : afd0                          ret
08cf :                               ._osxppdata
08cf : 8000                          word  $8000
08d0 :                               .osxgraphicsmove
08d0 :                               .graphicssaveexit
08d0 : 20f0 400a                     stm  r0,#xgraphic
08d2 : 21f0 400b                     stm  r1,#ygraphic
08d4 : afd0                          ret
08d5 :                               .osxfillrectangle
08d5 : 5ce7 20c0 21c1 22c2 23c3      push  r0,r1,r2,r3,r4,r5,link
08dd : adf0 003c                     jsr  #ossetinkcolourmask
08df : adf0 0912                     jsr  #osigraphicboxcoordinates
08e1 : 5310                          sub  r3,r1,#0
08e2 : 33f0 8001                     add  r3,#$8001
08e4 : 5200                          sub  r2,r0,#0
08e5 : 32e1                          inc  r2
08e6 :                               ._osxfrloop
08e6 : 05f0 ffff                     mov  r5,#$ffff
08e8 : 0420                          mov  r4,r2,#0
08e9 : 64ef                          and  r4,#15
08ea : c4e0                          sknz  r4
08eb : aff0 08f2                     jmp  #_osxfrhavemask
08ed : 05e1                          mov  r5,#1
08ee : 9540                          ror  r5,r4,#0
08ef : 55e1                          dec  r5
08f0 : 75f0 ffff                     xor  r5,#$ffff
08f2 :                               ._osxfrhavemask
08f2 : ade2                          jsr  #oswaitblitter
08f3 : 20f0 ff20                     stm  r0,#blitterx
08f5 : 21f0 ff21                     stm  r1,#blittery
08f7 : 04f0 4073                     mov  r4,#blittertemp
08f9 : 2540                          stm  r5,r4,#0
08fa : 24f0 ff22                     stm  r4,#blitterdata
08fc : 23f0 ff24                     stm  r3,#blittercmd
08fe : 0420                          mov  r4,r2,#0
08ff : 64ef                          and  r4,#15
0900 : c4e0                          sknz  r4
0901 : 04f0 0010                     mov  r4,#16
0903 : 3040                          add  r0,r4,#0
0904 : 5240                          sub  r2,r4,#0
0905 : b2e0                          skz  r2
0906 : aff0 08e6                     jmp  #_osxfrloop
0908 : 10c0 11c1 12c2 13c3 14c4      pop  r0,r1,r2,r3,r4,r5,link
0910 : aff0 08d0                     jmp  #graphicssaveexit
0912 :                               .osigraphicboxcoordinates
0912 : 5ce1 24c0                     push  r4
0914 : 12f0 400a                     ldm  r2,#xgraphic
0916 : 13f0 400b                     ldm  r3,#ygraphic
0918 : 0400                          mov  r4,r0,#0
0919 : 5420                          sub  r4,r2,#0
091a : ffe1                          skge
091b : aff0 0920                     jmp  #_osgcxnosortx
091d : 0400                          mov  r4,r0,#0
091e : 0020                          mov  r0,r2,#0
091f : 0240                          mov  r2,r4,#0
0920 :                               ._osgcxnosortx
0920 : 0410                          mov  r4,r1,#0
0921 : 5430                          sub  r4,r3,#0
0922 : ffe1                          skge
0923 : aff0 0928                     jmp  #_osgcxnosorty
0925 : 0410                          mov  r4,r1,#0
0926 : 0130                          mov  r1,r3,#0
0927 : 0340                          mov  r3,r4,#0
0928 :                               ._osgcxnosorty
0928 : 14c0 3ce1                     pop  r4
092a : afd0                          ret
092b :                               .osxdrawstring
092b : c3e0                          sknz  r3
092c : afd0                          ret
092d : 5ce7 21c0 22c1 23c2 24c3      push  r1,r2,r3,r4,r5,r6,link
0935 : adf0 003c                     jsr  #ossetinkcolourmask
0937 : 1620                          ldm  r6,r2,#0
0938 :                               ._osxdsloop
0938 : 32e1                          inc  r2
0939 : 1420                          ldm  r4,r2,#0
093a : adf0 094d                     jsr  #_osxdsdrawone
093c : 1420                          ldm  r4,r2,#0
093d : 94e8                          ror  r4,#8
093e : adf0 094d                     jsr  #_osxdsdrawone
0940 : b6e0                          skz  r6
0941 : aff0 0938                     jmp  #_osxdsloop
0943 : 11c0 12c1 13c2 14c3 15c4      pop  r1,r2,r3,r4,r5,r6,link
094b : aff0 08d0                     jmp  #graphicssaveexit
094d :                               ._osxdsdrawone
094d : c6e0                          sknz  r6
094e : afd0                          ret
094f : 64f0 00ff                     and  r4,#$00ff
0951 : 54f0 0021                     sub  r4,#33
0953 : ffe1                          skge
0954 : aff0 0972                     jmp  #_osxdsdrawoneexit
0956 : 5ce1 2dc0                     push  link
0958 : ade2                          jsr  #oswaitblitter
0959 : 20f0 ff20                     stm  r0,#blitterx
095b : 21f0 ff21                     stm  r1,#blittery
095d : 94ed                          ror  r4,#13
095e : 15f0 4007                     ldm  r5,#defaultfont
0960 : 3548                          add  r5,r4,#8
0961 : 0430                          mov  r4,r3,#0
0962 : 74e1                          xor  r4,#1
0963 : c4e0                          sknz  r4
0964 : aff0 096b                     jmp  #_osxdsscale1
0966 : 0450                          mov  r4,r5,#0
0967 : adf0 0977                     jsr  #_osxdrawscaledcharacter
0969 : aff0 0970                     jmp  #_osxdsexit2
096b :                               ._osxdsscale1
096b : 25f0 ff22                     stm  r5,#blitterdata
096d : 04e8                          mov  r4,#8
096e : 24f0 ff24                     stm  r4,#blittercmd
0970 :                               ._osxdsexit2
0970 : 1dc0 3ce1                     pop  link
0972 :                               ._osxdsdrawoneexit
0972 : 56e1                          dec  r6
0973 : 0430                          mov  r4,r3,#0
0974 : 84e6                          mult  r4,#6
0975 : 3040                          add  r0,r4,#0
0976 : afd0                          ret
0977 :                               ._osxdrawscaledcharacter
0977 : 5ce5 21c0 22c1 24c2 25c3      push  r1,r2,r4,r5,link
097d : 02e7                          mov  r2,#7
097e :                               ._osxdscloop
097e : 5ce1 20c0                     push  r0
0980 : 1540                          ldm  r5,r4,#0
0981 : 34e1                          inc  r4
0982 :                               ._osxdscloop2
0982 : d5e0                          skp  r5
0983 : adf0 0998                     jsr  #_osxdrawscaledpixel
0985 : 3550                          add  r5,r5,#0
0986 : 3030                          add  r0,r3,#0
0987 : b5e0                          skz  r5
0988 : aff0 0982                     jmp  #_osxdscloop2
098a : 10c0 3ce1                     pop  r0
098c : 3130                          add  r1,r3,#0
098d : 52e1                          dec  r2
098e : b2e0                          skz  r2
098f : aff0 097e                     jmp  #_osxdscloop
0991 : 11c0 12c1 14c2 15c3 1dc4      pop  r1,r2,r4,r5,link
0997 : afd0                          ret
0998 :                               ._osxdrawscaledpixel
0998 : 5ce3 20c0 21c1 2dc2           push  r0,r1,link
099c : ade2                          jsr  #oswaitblitter
099d : 20f0 ff20                     stm  r0,#blitterx
099f : 21f0 ff21                     stm  r1,#blittery
09a1 : 00e1                          mov  r0,#1
09a2 : 9030                          ror  r0,r3,#0
09a3 : 50e1                          dec  r0
09a4 : 70f0 ffff                     xor  r0,#$ffff
09a6 : 01f0 4073                     mov  r1,#blittertemp
09a8 : 2010                          stm  r0,r1,#0
09a9 : 21f0 ff22                     stm  r1,#blitterdata
09ab : 0030                          mov  r0,r3,#0
09ac : 30f0 8000                     add  r0,#$8000
09ae : 20f0 ff24                     stm  r0,#blittercmd
09b0 : 10c0 11c1 1dc2 3ce3           pop  r0,r1,link
09b4 : afd0                          ret
09b5 :                               .osidrawsolidcharacter
09b5 : 5ce3 20c0 21c1 2dc2           push  r0,r1,link
09b9 : 0100                          mov  r1,r0,#0
09ba : 60f0 f000                     and  r0,#$f000
09bc : 90e4                          ror  r0,#4
09bd : 30f0 007f                     add  r0,#$7f
09bf : adf0 09c9                     jsr  #osidrawcharacter
09c1 : 0010                          mov  r0,r1,#0
09c2 : adf0 09c9                     jsr  #osidrawcharacter
09c4 : 10c0 11c1 1dc2 3ce3           pop  r0,r1,link
09c8 : afd0                          ret
09c9 :                               .osidrawcharacter
09c9 : 5ce4 20c0 21c1 22c2 2dc3      push  r0,r1,r2,link
09ce : 0200                          mov  r2,r0,#0
09cf : 60f0 00ff                     and  r0,#$ff
09d1 : 50f0 0021                     sub  r0,#33
09d3 : d0e0                          skp  r0
09d4 : aff0 09fa                     jmp  #_osdcexit
09d6 : ade2                          jsr  #oswaitblitter
09d7 : 11f0 400a                     ldm  r1,#xgraphic
09d9 : 21f0 ff20                     stm  r1,#blitterx
09db : 11f0 400b                     ldm  r1,#ygraphic
09dd : 21f0 ff21                     stm  r1,#blittery
09df : 62f0 0f00                     and  r2,#$0f00
09e1 : 92e8                          ror  r2,#8
09e2 : c2e0                          sknz  r2
09e3 : aff0 09eb                     jmp  #_osdcnotbackground
09e5 : 11f0 4011                     ldm  r1,#colourmask
09e7 : 6120                          and  r1,r2,#0
09e8 : c1e0                          sknz  r1
09e9 : 12f0 4011                     ldm  r2,#colourmask
09eb :                               ._osdcnotbackground
09eb : 11f0 4011                     ldm  r1,#colourmask
09ed : 91e8                          ror  r1,#8
09ee : 3210                          add  r2,r1,#0
09ef : 22f0 ff23                     stm  r2,#blittercmask
09f1 : 90ed                          ror  r0,#13
09f2 : 11f0 4007                     ldm  r1,#defaultfont
09f4 : 3018                          add  r0,r1,#8
09f5 : 20f0 ff22                     stm  r0,#blitterdata
09f7 : 00e8                          mov  r0,#8
09f8 : 20f0 ff24                     stm  r0,#blittercmd
09fa :                               ._osdcexit
09fa : 10c0 11c1 12c2 1dc3 3ce4      pop  r0,r1,r2,link
09ff : afd0                          ret
0a00 :                               .osxprintcharacter
0a00 : 5ce6 20c0 21c1 22c2 23c3      push  r0,r1,r2,r3,r4,link
0a07 : 60f0 00ff                     and  r0,#$ff
0a09 : 0300                          mov  r3,r0,#0
0a0a : 53f0 0020                     sub  r3,#32
0a0c : d3e0                          skp  r3
0a0d : aff0 0a33                     jmp  #_ospccontrol
0a0f : adf0 0af5                     jsr  #_osprintcharacteratxy
0a11 : 10f0 4008                     ldm  r0,#xtextpos
0a13 : 30e1                          inc  r0
0a14 : 20f0 4008                     stm  r0,#xtextpos
0a16 :                               ._ospcchecknewline
0a16 : 10f0 4008                     ldm  r0,#xtextpos
0a18 : 70f0 0035                     xor  r0,#charwidth
0a1a : b0e0                          skz  r0
0a1b : aff0 0a2b                     jmp  #_ospcexit
0a1d :                               ._ospcfreereturn
0a1d : 2ef0 4008                     stm  r14,#xtextpos
0a1f : 10f0 4009                     ldm  r0,#ytextpos
0a21 : 30e1                          inc  r0
0a22 : 20f0 4009                     stm  r0,#ytextpos
0a24 :                               ._ospccheckscroll
0a24 : 13f0 4009                     ldm  r3,#ytextpos
0a26 : 73f0 001e                     xor  r3,#charheight
0a28 : c3e0                          sknz  r3
0a29 : adf0 0b29                     jsr  #_ospcscroll
0a2b :                               ._ospcexit
0a2b : 10c0 11c1 12c2 13c3 14c4      pop  r0,r1,r2,r3,r4,link
0a32 : afd0                          ret
0a33 :                               ._ospccontrol
0a33 : 33f0 0010                     add  r3,#16
0a35 : d3e0                          skp  r3
0a36 : aff0 0a3c                     jmp  #_ospcnotcolour
0a38 : 23f0 400c                     stm  r3,#fgrcolour
0a3a : aff0 0a2b                     jmp  #_ospcexit
0a3c :                               ._ospcnotcolour
0a3c : 30f0 0a42                     add  r0,#_ospcvectors
0a3e : 1000                          ldm  r0,r0,#0
0a3f : ad00                          brl  link,r0,#0
0a40 : aff0 0a2b                     jmp  #_ospcexit
0a42 :                               ._ospcvectors
0a42 : 0a2b                          word  _ospcexit
0a43 : 0a93                          word  _ospcmoveleft
0a44 : 0a96                          word  _ospcmoveright
0a45 : 0a82                          word  _ospcmoveup
0a46 : 0a85                          word  _ospcmovedown
0a47 : 0ab3                          word  _ospcinsert
0a48 : 0a2b                          word  _ospcexit
0a49 : 0a2b                          word  _ospcexit
0a4a : 0a9d                          word  _ospcbackspace
0a4b : 0a79                          word  _ospctab
0a4c : 0a2b                          word  _ospcexit
0a4d : 0a52                          word  _ospchome
0a4e : 0a57                          word  _ospcclear
0a4f : 0a6a                          word  _ospcreturn
0a50 : 0a1d                          word  _ospcfreereturn
0a51 : 0aaa                          word  _ospcswapcolours
0a52 :                               ._ospchome
0a52 : 2ef0 4008                     stm  r14,#xtextpos
0a54 : 2ef0 4009                     stm  r14,#ytextpos
0a56 : afd0                          ret
0a57 :                               ._ospcclear
0a57 : adf0 0665                     jsr  #osiclearscreen
0a59 : adf0 0a52                     jsr  #_ospchome
0a5b : 11f0 4002                     ldm  r1,#textmemory
0a5d : 03f0 0636                     mov  r3,#charwidth*charheight
0a5f : 10f0 400d                     ldm  r0,#bgrcolour
0a61 : 90e4                          ror  r0,#4
0a62 :                               ._ospcerase
0a62 : 2010                          stm  r0,r1,#0
0a63 : 31e1                          inc  r1
0a64 : 53e1                          dec  r3
0a65 : b3e0                          skz  r3
0a66 : aff0 0a62                     jmp  #_ospcerase
0a68 : aff0 0a2b                     jmp  #_ospcexit
0a6a :                               ._ospcreturn
0a6a : 7000                          clr  r0
0a6b : adf0 0af5                     jsr  #_osprintcharacteratxy
0a6d : 10f0 4008                     ldm  r0,#xtextpos
0a6f : 30e1                          inc  r0
0a70 : 20f0 4008                     stm  r0,#xtextpos
0a72 : 70f0 0035                     xor  r0,#charwidth
0a74 : b0e0                          skz  r0
0a75 : aff0 0a6a                     jmp  #_ospcreturn
0a77 : aff0 0a1d                     jmp  #_ospcfreereturn
0a79 :                               ._ospctab
0a79 : 10f0 4008                     ldm  r0,#xtextpos
0a7b : 30e4                          add  r0,#tabstop
0a7c : 60f0 fffc                     and  r0,#$ffff-(tabstop-1)
0a7e : 20f0 4008                     stm  r0,#xtextpos
0a80 : aff0 0a16                     jmp  #_ospcchecknewline
0a82 :                               ._ospcmoveup
0a82 : 00f0 ffff                     mov  r0,#-1
0a84 : c0e0                          sknz  r0
0a85 :                               ._ospcmovedown
0a85 : 00e1                          mov  r0,#1
0a86 : 02f0 001e                     mov  r2,#charheight
0a88 : 03f0 4009                     mov  r3,#ytextpos
0a8a :                               ._ospcadjust
0a8a : 1130                          ldm  r1,r3,#0
0a8b : 3100                          add  r1,r0,#0
0a8c : d1e0                          skp  r1
0a8d : 3120                          add  r1,r2,#0
0a8e : 5120                          sub  r1,r2,#0
0a8f : d1e0                          skp  r1
0a90 : 3120                          add  r1,r2,#0
0a91 : 2130                          stm  r1,r3,#0
0a92 : afd0                          ret
0a93 :                               ._ospcmoveleft
0a93 : 00f0 ffff                     mov  r0,#-1
0a95 : c0e0                          sknz  r0
0a96 :                               ._ospcmoveright
0a96 : 00e1                          mov  r0,#1
0a97 : 02f0 0035                     mov  r2,#charwidth
0a99 : 03f0 4008                     mov  r3,#xtextpos
0a9b : aff0 0a8a                     jmp  #_ospcadjust
0a9d :                               ._ospcbackspace
0a9d : 10f0 4008                     ldm  r0,#xtextpos
0a9f : c0e0                          sknz  r0
0aa0 : afd0                          ret
0aa1 : 50e1                          dec  r0
0aa2 : 20f0 4008                     stm  r0,#xtextpos
0aa4 : 00f0 0020                     mov  r0,#32
0aa6 : adf0 0af5                     jsr  #_osprintcharacteratxy
0aa8 : aff0 0a2b                     jmp  #_ospcexit
0aaa :                               ._ospcswapcolours
0aaa : 10f0 400c                     ldm  r0,#fgrcolour
0aac : 11f0 400d                     ldm  r1,#bgrcolour
0aae : 21f0 400c                     stm  r1,#fgrcolour
0ab0 : 20f0 400d                     stm  r0,#bgrcolour
0ab2 : afd0                          ret
0ab3 :                               ._ospcinsert
0ab3 : 10f0 4009                     ldm  r0,#ytextpos
0ab5 : 80f0 0035                     mult  r0,#charwidth
0ab7 : 3120                          add  r1,r2,#0
0ab8 : 11f0 4002                     ldm  r1,#textmemory
0aba : 3010                          add  r0,r1,#0
0abb : 0400                          mov  r4,r0,#0
0abc : 30f0 0034                     add  r0,#charwidth-1
0abe : 13f0 4009                     ldm  r3,#ytextpos
0ac0 :                               ._ospcifindend
0ac0 : 1200                          ldm  r2,r0,#0
0ac1 : 62f0 00ff                     and  r2,#$00ff
0ac3 : c2e0                          sknz  r2
0ac4 : aff0 0ad1                     jmp  #_ospcifoundend
0ac6 : 30f0 0035                     add  r0,#charwidth
0ac8 : 33e1                          inc  r3
0ac9 : 0230                          mov  r2,r3,#0
0aca : 72f0 001e                     xor  r2,#charheight
0acc : c2e0                          sknz  r2
0acd : aff0 0a2b                     jmp  #_ospcexit
0acf : aff0 0ac0                     jmp  #_ospcifindend
0ad1 :                               ._ospcifoundend
0ad1 : 50e1                          dec  r0
0ad2 : 1200                          ldm  r2,r0,#0
0ad3 : 62f0 00ff                     and  r2,#$00ff
0ad5 : b2e0                          skz  r2
0ad6 : aff0 0a2b                     jmp  #_ospcexit
0ad8 : adf0 0b0f                     jsr  #_oscurrenttextr1
0ada :                               ._ospcishift
0ada : 1200                          ldm  r2,r0,#0
0adb : 2201                          stm  r2,r0,#1
0adc : 0200                          mov  r2,r0,#0
0add : 50e1                          dec  r0
0ade : 7210                          xor  r2,r1,#0
0adf : b2e0                          skz  r2
0ae0 : aff0 0ada                     jmp  #_ospcishift
0ae2 : 02f0 0720                     mov  r2,#$0720
0ae4 : 2210                          stm  r2,r1,#0
0ae5 : 11f0 4009                     ldm  r1,#ytextpos
0ae7 : 5310                          sub  r3,r1,#0
0ae8 : 81e8                          mult  r1,#pixelcharheight
0ae9 : 0240                          mov  r2,r4,#0
0aea :                               ._ospcirefresh
0aea : adf0 0b57                     jsr  #osidrawoneline
0aec : 31e8                          add  r1,#pixelcharheight
0aed : 32f0 0035                     add  r2,#charwidth
0aef : 53e1                          dec  r3
0af0 : e3e0                          skm  r3
0af1 : aff0 0aea                     jmp  #_ospcirefresh
0af3 : aff0 0a2b                     jmp  #_ospcexit
0af5 :                               ._osprintcharacteratxy
0af5 : 5ce4 20c0 21c1 22c2 2dc3      push  r0,r1,r2,link
0afa : 11f0 400c                     ldm  r1,#fgrcolour
0afc : 91e8                          ror  r1,#8
0afd : 3010                          add  r0,r1,#0
0afe : 11f0 400d                     ldm  r1,#bgrcolour
0b00 : 91e4                          ror  r1,#4
0b01 : 3010                          add  r0,r1,#0
0b02 : adf0 0b1e                     jsr  #_ossetchardrawpos
0b04 : adf0 09b5                     jsr  #osidrawsolidcharacter
0b06 : adf0 0b0f                     jsr  #_oscurrenttextr1
0b08 : 2010                          stm  r0,r1,#0
0b09 : 10c0 11c1 12c2 1dc3 3ce4      pop  r0,r1,r2,link
0b0e : afd0                          ret
0b0f :                               ._oscurrenttextr1
0b0f : 5ce1 22c0                     push  r2
0b11 : 11f0 4008                     ldm  r1,#xtextpos
0b13 : 12f0 4009                     ldm  r2,#ytextpos
0b15 : 82f0 0035                     mult  r2,#charwidth
0b17 : 3120                          add  r1,r2,#0
0b18 : 12f0 4002                     ldm  r2,#textmemory
0b1a : 3120                          add  r1,r2,#0
0b1b : 12c0 3ce1                     pop  r2
0b1d : afd0                          ret
0b1e :                               ._ossetchardrawpos
0b1e : 11f0 4008                     ldm  r1,#xtextpos
0b20 : 81e6                          mult  r1,#pixelcharwidth
0b21 : 21f0 400a                     stm  r1,#xgraphic
0b23 : 11f0 4009                     ldm  r1,#ytextpos
0b25 : 81e8                          mult  r1,#pixelcharheight
0b26 : 21f0 400b                     stm  r1,#ygraphic
0b28 : afd0                          ret
0b29 :                               ._ospcscroll
0b29 : 10f0 4002                     ldm  r0,#textmemory
0b2b : 0100                          mov  r1,r0,#0
0b2c : 31f0 0035                     add  r1,#charwidth
0b2e : 02f0 0601                     mov  r2,#charwidth*(charheight-1)
0b30 :                               ._ospccopy1
0b30 : 1310                          ldm  r3,r1,#0
0b31 : 2300                          stm  r3,r0,#0
0b32 : 30e1                          inc  r0
0b33 : 31e1                          inc  r1
0b34 : 52e1                          dec  r2
0b35 : b2e0                          skz  r2
0b36 : aff0 0b30                     jmp  #_ospccopy1
0b38 : 02f0 0035                     mov  r2,#charwidth
0b3a : 11f0 400d                     ldm  r1,#bgrcolour
0b3c : 91e4                          ror  r1,#4
0b3d :                               ._ospccopy2
0b3d : 2100                          stm  r1,r0,#0
0b3e : 30e1                          inc  r0
0b3f : 52e1                          dec  r2
0b40 : b2e0                          skz  r2
0b41 : aff0 0b3d                     jmp  #_ospccopy2
0b43 : 7110                          clr  r1
0b44 : 12f0 4002                     ldm  r2,#textmemory
0b46 :                               ._ospcredrawscreen
0b46 : adf0 0b57                     jsr  #osidrawoneline
0b48 : 31e8                          add  r1,#pixelcharheight
0b49 : 32f0 0035                     add  r2,#charwidth
0b4b : 0010                          mov  r0,r1,#0
0b4c : 70f0 00f0                     xor  r0,#charheight*pixelcharheight
0b4e : b0e0                          skz  r0
0b4f : aff0 0b46                     jmp  #_ospcredrawscreen
0b51 : 00f0 001d                     mov  r0,#charheight-1
0b53 : 20f0 4009                     stm  r0,#ytextpos
0b55 : aff0 0a2b                     jmp  #_ospcexit
0b57 :                               .osidrawoneline
0b57 : 5ce6 20c0 21c1 22c2 23c3      push  r0,r1,r2,r3,r4,link
0b5e : 03f0 0035                     mov  r3,#charwidth
0b60 : 7440                          clr  r4
0b61 :                               ._ospcnextcharacter
0b61 : 24f0 400a                     stm  r4,#xgraphic
0b63 : 21f0 400b                     stm  r1,#ygraphic
0b65 : 1020                          ldm  r0,r2,#0
0b66 : 32e1                          inc  r2
0b67 : adf0 09b5                     jsr  #osidrawsolidcharacter
0b69 : 34e6                          add  r4,#pixelcharwidth
0b6a : 53e1                          dec  r3
0b6b : b3e0                          skz  r3
0b6c : aff0 0b61                     jmp  #_ospcnextcharacter
0b6e : 10c0 11c1 12c2 13c3 14c4      pop  r0,r1,r2,r3,r4,link
0b75 : afd0                          ret
0b76 :                               .osxgettextpos
0b76 : 10f0 4008                     ldm  r0,#xtextpos
0b78 : 11f0 4009                     ldm  r1,#ytextpos
0b7a : afd0                          ret
0b7b :                               .osxprintstring
0b7b : 5ce2 20c0 2dc1                push  r0,link
0b7e : adf0 0b8d                     jsr  #_osxpinlineprinter
0b80 : 10c0 1dc1 3ce2                pop  r0,link
0b83 : afd0                          ret
0b84 :                               .osxprintinline
0b84 : 5ce1 20c0                     push  r0
0b86 : 00d0                          mov  r0,link,#0
0b87 : adf0 0b8d                     jsr  #_osxpinlineprinter
0b89 : 0d00                          mov  link,r0,#0
0b8a : 10c0 3ce1                     pop  r0
0b8c : afd0                          ret
0b8d :                               ._osxpinlineprinter
0b8d : 5ce3 21c0 22c1 2dc2           push  r1,r2,link
0b91 : 0101                          mov  r1,r0,#1
0b92 : adf0 0026                     jsr  #oswordlength
0b94 : 0200                          mov  r2,r0,#0
0b95 :                               ._osxpiploop
0b95 : c2e0                          sknz  r2
0b96 : aff0 0ba0                     jmp  #_osxpipexit
0b98 : 1010                          ldm  r0,r1,#0
0b99 : ade4                          jsr  #osprintcharacter
0b9a : 90e8                          ror  r0,#8
0b9b : ade4                          jsr  #osprintcharacter
0b9c : 31e1                          inc  r1
0b9d : 52e1                          dec  r2
0b9e : aff0 0b95                     jmp  #_osxpiploop
0ba0 :                               ._osxpipexit
0ba0 : 0010                          mov  r0,r1,#0
0ba1 : 11c0 12c1 1dc2 3ce3           pop  r1,r2,link
0ba5 : afd0                          ret
0ba6 :                               .osxspriteselect
0ba6 : 5ce2 21c0 22c1                push  r1,r2
0ba9 : 0200                          mov  r2,r0,#0
0baa : 11f0 400f                     ldm  r1,#spritecount
0bac : 5010                          sub  r0,r1,#0
0bad : 00e1                          mov  r0,#1
0bae : ffe0                          sklt
0baf : aff0 0bba                     jmp  #_osxssexit
0bb1 : 2ff0 4074                     stm  r15,#spritesenabled
0bb3 : 82e6                          mult  r2,#spriterecordsize
0bb4 : 10f0 400e                     ldm  r0,#spriteaddress
0bb6 : 3020                          add  r0,r2,#0
0bb7 : 20f0 4075                     stm  r0,#spriteselect
0bb9 : 7000                          clr  r0
0bba :                               ._osxssexit
0bba : 11c0 12c1 3ce2                pop  r1,r2
0bbd : afd0                          ret
0bbe :                               .osxspritemove
0bbe : 5ce1 22c0                     push  r2
0bc0 : 0200                          mov  r2,r0,#0
0bc1 : 32f0 0020                     add  r2,#32
0bc3 : 52f0 0180                     sub  r2,#pixelwidth+64
0bc5 : ffe0                          sklt
0bc6 : aff0 0bd6                     jmp  #_osxsmfail
0bc8 : 0210                          mov  r2,r1,#0
0bc9 : 32f0 0020                     add  r2,#32
0bcb : 52f0 0130                     sub  r2,#pixelheight+64
0bcd : ffe0                          sklt
0bce : aff0 0bd6                     jmp  #_osxsmfail
0bd0 : 12f0 4075                     ldm  r2,#spriteselect
0bd2 : 2023                          stm  r0,r2,#spnewx
0bd3 : 2124                          stm  r1,r2,#spnewy
0bd4 : 7000                          clr  r0
0bd5 : b0e0                          skz  r0
0bd6 :                               ._osxsmfail
0bd6 : 00e1                          mov  r0,#1
0bd7 : 12c0 3ce1                     pop  r2
0bd9 : afd0                          ret
0bda :                               .osxspritesetimage
0bda : 5ce3 21c0 22c1 2dc2           push  r1,r2,link
0bde : 0100                          mov  r1,r0,#0
0bdf : 12f0 4004                     ldm  r2,#spriteimagecount
0be1 : 5020                          sub  r0,r2,#0
0be2 : ffe0                          sklt
0be3 : aff0 0beb                     jmp  #_osxssifail
0be5 : 00f0 ff00                     mov  r0,#$ff00
0be7 : adf0 0c3b                     jsr  #osiupdatestatus
0be9 : 7000                          clr  r0
0bea : b0e0                          skz  r0
0beb :                               ._osxssifail
0beb : 00e1                          mov  r0,#1
0bec : 11c0 12c1 1dc2 3ce3           pop  r1,r2,link
0bf0 : afd0                          ret
0bf1 :                               .osxspritesetorientation
0bf1 : 5ce2 21c0 2dc1                push  r1,link
0bf4 : 0100                          mov  r1,r0,#0
0bf5 : 50e4                          sub  r0,#4
0bf6 : ffe0                          sklt
0bf7 : aff0 0c00                     jmp  #_osxssofail
0bf9 : 91e3                          ror  r1,#3
0bfa : 00f0 9fff                     mov  r0,#$9fff
0bfc : adf0 0c3b                     jsr  #osiupdatestatus
0bfe : 7000                          clr  r0
0bff : b0e0                          skz  r0
0c00 :                               ._osxssofail
0c00 : 00e1                          mov  r0,#1
0c01 : 11c0 1dc1 3ce2                pop  r1,link
0c04 : afd0                          ret
0c05 :                               .osxspritesetsize
0c05 : 5ce2 21c0 2dc1                push  r1,link
0c08 : 50e1                          dec  r0
0c09 : 0100                          mov  r1,r0,#0
0c0a : 60f0 fffe                     and  r0,#$fffe
0c0c : b0e0                          skz  r0
0c0d : aff0 0c16                     jmp  #_osxsssfail
0c0f : 91e4                          ror  r1,#4
0c10 : 00f0 efff                     mov  r0,#$efff
0c12 : adf0 0c3b                     jsr  #osiupdatestatus
0c14 : 7000                          clr  r0
0c15 : b0e0                          skz  r0
0c16 :                               ._osxsssfail
0c16 : 00e1                          mov  r0,#1
0c17 : 11c0 1dc1 3ce2                pop  r1,link
0c1a : afd0                          ret
0c1b :                               .osxspritesetcolour
0c1b : 5ce2 21c0 2dc1                push  r1,link
0c1e : 0100                          mov  r1,r0,#0
0c1f : 50f0 0010                     sub  r0,#16
0c21 : ffe0                          sklt
0c22 : aff0 0c2b                     jmp  #_osxsscfail
0c24 : 91e8                          ror  r1,#8
0c25 : 00f0 f0ff                     mov  r0,#$f0ff
0c27 : adf0 0c3b                     jsr  #osiupdatestatus
0c29 : 7000                          clr  r0
0c2a : b0e0                          skz  r0
0c2b :                               ._osxsscfail
0c2b : 00e1                          mov  r0,#1
0c2c : 11c0 1dc1 3ce2                pop  r1,link
0c2f : afd0                          ret
0c30 :                               .osxspritekill
0c30 : 5ce2 21c0 2dc1                push  r1,link
0c33 : 7000                          clr  r0
0c34 : 7110                          clr  r1
0c35 : adf0 0c3b                     jsr  #osiupdatestatus
0c37 : 11c0 1dc1 3ce2                pop  r1,link
0c3a : afd0                          ret
0c3b :                               .osiupdatestatus
0c3b : 5ce2 22c0 23c1                push  r2,r3
0c3e : 12f0 4075                     ldm  r2,#spriteselect
0c40 : 1325                          ldm  r3,r2,#spnewstatus
0c41 : 73f0 0800                     xor  r3,#spnochange
0c43 : b3e0                          skz  r3
0c44 : aff0 0c48                     jmp  #_osiuschanged
0c46 : 1322                          ldm  r3,r2,#spstatus
0c47 : 2325                          stm  r3,r2,#spnewstatus
0c48 :                               ._osiuschanged
0c48 : 1325                          ldm  r3,r2,#spnewstatus
0c49 : 6300                          and  r3,r0,#0
0c4a : 3310                          add  r3,r1,#0
0c4b : 2325                          stm  r3,r2,#spnewstatus
0c4c : 12c0 13c1 3ce2                pop  r2,r3
0c4f : afd0                          ret
0c50 :                               .osxgetspriteinfo
0c50 : 5ce2 21c0 22c1                push  r1,r2
0c53 : 80e6                          mult  r0,#spriterecordsize
0c54 : 12f0 400e                     ldm  r2,#spriteaddress
0c56 : 3200                          add  r2,r0,#0
0c57 : 3210                          add  r2,r1,#0
0c58 : 1123                          ldm  r1,r2,#spnewx-spx
0c59 : 0010                          mov  r0,r1,#0
0c5a : 71f0 0800                     xor  r1,#spnochange
0c5c : c1e0                          sknz  r1
0c5d : 1020                          ldm  r0,r2,#0
0c5e : 11c0 12c1 3ce2                pop  r1,r2
0c61 : afd0                          ret
0c62 :                               .osxspritecollision
0c62 : 5ce6 21c0 22c1 23c2 24c3      push  r1,r2,r3,r4,r5,link
0c69 : 0320                          mov  r3,r2,#0
0c6a : 63f0 fff0                     and  r3,#$fff0
0c6c : b3e0                          skz  r3
0c6d : aff0 0c9b                     jmp  #_osxscfail
0c6f : 32e1                          inc  r2
0c70 : 14f0 400f                     ldm  r4,#spritecount
0c72 : 0300                          mov  r3,r0,#0
0c73 : 5340                          sub  r3,r4,#0
0c74 : ffe0                          sklt
0c75 : aff0 0c9b                     jmp  #_osxscfail
0c77 : 0310                          mov  r3,r1,#0
0c78 : 5340                          sub  r3,r4,#0
0c79 : ffe0                          sklt
0c7a : aff0 0c9b                     jmp  #_osxscfail
0c7c : 14f0 400e                     ldm  r4,#spriteaddress
0c7e : 80e6                          mult  r0,#spriterecordsize
0c7f : 3040                          add  r0,r4,#0
0c80 : 81e6                          mult  r1,#spriterecordsize
0c81 : 3140                          add  r1,r4,#0
0c82 : 1302                          ldm  r3,r0,#spstatus
0c83 : c3e0                          sknz  r3
0c84 : aff0 0c99                     jmp  #_osxscnocollide
0c86 : 1312                          ldm  r3,r1,#spstatus
0c87 : c3e0                          sknz  r3
0c88 : aff0 0c99                     jmp  #_osxscnocollide
0c8a : adf0 0ca4                     jsr  #_osxsccheck
0c8c : ffe0                          sklt
0c8d : aff0 0c99                     jmp  #_osxscnocollide
0c8f : 30e1                          inc  r0
0c90 : 31e1                          inc  r1
0c91 : adf0 0ca4                     jsr  #_osxsccheck
0c93 : ffe0                          sklt
0c94 : aff0 0c99                     jmp  #_osxscnocollide
0c96 : 00f0 ffff                     mov  r0,#-1
0c98 : bee0                          skz  r14
0c99 :                               ._osxscnocollide
0c99 : 7000                          clr  r0
0c9a : bee0                          skz  r14
0c9b :                               ._osxscfail
0c9b : 00e1                          mov  r0,#1
0c9c :                               ._osxscexit
0c9c : 11c0 12c1 13c2 14c3 15c4      pop  r1,r2,r3,r4,r5,link
0ca3 : afd0                          ret
0ca4 :                               ._osxsccheck
0ca4 : 1303                          ldm  r3,r0,#spnewx
0ca5 : 0530                          mov  r5,r3,#0
0ca6 : 75f0 0800                     xor  r5,#spnochange
0ca8 : c5e0                          sknz  r5
0ca9 : 1300                          ldm  r3,r0,#spx
0caa : 1413                          ldm  r4,r1,#spnewx
0cab : 0540                          mov  r5,r4,#0
0cac : 75f0 0800                     xor  r5,#spnochange
0cae : c5e0                          sknz  r5
0caf : 1410                          ldm  r4,r1,#spx
0cb0 : 5340                          sub  r3,r4,#0
0cb1 : e3e0                          skm  r3
0cb2 : aff0 0cb7                     jmp  #_osxnoabs
0cb4 : 73f0 ffff                     xor  r3,#$ffff
0cb6 : 33e1                          inc  r3
0cb7 :                               ._osxnoabs
0cb7 : 5320                          sub  r3,r2,#0
0cb8 : afd0                          ret
0cb9 :                               .osxspritereset
0cb9 : 5ce2 20c0 21c1                push  r0,r1
0cbc : 2ef0 4074                     stm  r14,#spritesenabled
0cbe : 10f0 400e                     ldm  r0,#spriteaddress
0cc0 : 11f0 400f                     ldm  r1,#spritecount
0cc2 : 81e6                          mult  r1,#spriterecordsize
0cc3 :                               ._osxsrclear
0cc3 : 2e00                          stm  r14,r0,#0
0cc4 : 30e1                          inc  r0
0cc5 : 51e1                          dec  r1
0cc6 : b1e0                          skz  r1
0cc7 : aff0 0cc3                     jmp  #_osxsrclear
0cc9 : 10c0 11c1 3ce2                pop  r0,r1
0ccc : aff0 0cce                     jmp  #osiresetstatus
0cce :                               .osiresetstatus
0cce : 5ce3 20c0 21c1 22c2           push  r0,r1,r2
0cd2 : 12f0 400e                     ldm  r2,#spriteaddress
0cd4 : 11f0 400f                     ldm  r1,#spritecount
0cd6 :                               ._osirsloop
0cd6 : 1022                          ldm  r0,r2,#spstatus
0cd7 : 60f0 7fff                     and  r0,#$7fff
0cd9 : 2022                          stm  r0,r2,#spstatus
0cda : 00f0 0800                     mov  r0,#spnochange
0cdc : 2023                          stm  r0,r2,#spnewx
0cdd : 2024                          stm  r0,r2,#spnewy
0cde : 2025                          stm  r0,r2,#spnewstatus
0cdf : 32e6                          add  r2,#spriterecordsize
0ce0 : 51e1                          dec  r1
0ce1 : b1e0                          skz  r1
0ce2 : aff0 0cd6                     jmp  #_osirsloop
0ce4 : 10c0 11c1 12c2 3ce3           pop  r0,r1,r2
0ce8 : afd0                          ret
0ce9 :                               .osxspriteupdate
0ce9 : 5ce7 20c0 21c1 22c2 23c3      push  r0,r1,r2,r3,r4,r5,link
0cf1 : adf0 0d00                     jsr  #spritephase1
0cf3 : adf0 0d6d                     jsr  #spritephase2
0cf5 : adf0 0cce                     jsr  #osiresetstatus
0cf7 : 10c0 11c1 12c2 13c3 14c4      pop  r0,r1,r2,r3,r4,r5,link
0cff : afd0                          ret
0d00 :                               .spritephase1
0d00 : 5ce1 2dc0                     push  link
0d02 : 11f0 400e                     ldm  r1,#spriteaddress
0d04 : 12f0 400f                     ldm  r2,#spritecount
0d06 :                               ._sp1loop
0d06 : 1412                          ldm  r4,r1,#spstatus
0d07 : b4e0                          skz  r4
0d08 : aff0 0d0e                     jmp  #_sp1active
0d0a : 1415                          ldm  r4,r1,#spnewstatus
0d0b : c4e0                          sknz  r4
0d0c : aff0 0d33                     jmp  #_sp1next
0d0e :                               ._sp1active
0d0e : 1013                          ldm  r0,r1,#spnewx
0d0f : 1314                          ldm  r3,r1,#spnewy
0d10 : 3030                          add  r0,r3,#0
0d11 : 3040                          add  r0,r4,#0
0d12 : 70f0 1800                     xor  r0,#spnochange*3
0d14 : c0e0                          sknz  r0
0d15 : aff0 0d33                     jmp  #_sp1next
0d17 : 7000                          clr  r0
0d18 : adf0 0d84                     jsr  #spritedraw
0d1a : c0e0                          sknz  r0
0d1b : adf0 0d3b                     jsr  #phase1collidecheck
0d1d :                               ._sp1update
0d1d : 1313                          ldm  r3,r1,#spnewx
0d1e : 0430                          mov  r4,r3,#0
0d1f : 74f0 0800                     xor  r4,#spnochange
0d21 : b4e0                          skz  r4
0d22 : 2310                          stm  r3,r1,#spx
0d23 : 1314                          ldm  r3,r1,#spnewy
0d24 : 0430                          mov  r4,r3,#0
0d25 : 74f0 0800                     xor  r4,#spnochange
0d27 : b4e0                          skz  r4
0d28 : 2311                          stm  r3,r1,#spy
0d29 : 1315                          ldm  r3,r1,#spnewstatus
0d2a : 0430                          mov  r4,r3,#0
0d2b : 74f0 0800                     xor  r4,#spnochange
0d2d : c4e0                          sknz  r4
0d2e : 1312                          ldm  r3,r1,#spstatus
0d2f : e3e0                          skm  r3
0d30 : 33f0 8000                     add  r3,#$8000
0d32 : 2312                          stm  r3,r1,#spstatus
0d33 :                               ._sp1next
0d33 : 31e6                          add  r1,#spriterecordsize
0d34 : 52e1                          dec  r2
0d35 : b2e0                          skz  r2
0d36 : aff0 0d06                     jmp  #_sp1loop
0d38 : 1dc0 3ce1                     pop  link
0d3a : afd0                          ret
0d3b :                               .phase1collidecheck
0d3b : 5ce1 2dc0                     push  link
0d3d : 13f0 400e                     ldm  r3,#spriteaddress
0d3f : 14f0 400f                     ldm  r4,#spritecount
0d41 :                               ._p1ccloop
0d41 : 1032                          ldm  r0,r3,#spstatus
0d42 : c0e0                          sknz  r0
0d43 : aff0 0d60                     jmp  #_p1ccnext
0d45 : d0e0                          skp  r0
0d46 : aff0 0d60                     jmp  #_p1ccnext
0d48 : 0010                          mov  r0,r1,#0
0d49 : 7030                          xor  r0,r3,#0
0d4a : c0e0                          sknz  r0
0d4b : aff0 0d60                     jmp  #_p1ccnext
0d4d : 1010                          ldm  r0,r1,#spx
0d4e : 1530                          ldm  r5,r3,#spx
0d4f : adf0 0d68                     jsr  #_p1cccompare
0d51 : ffe0                          sklt
0d52 : aff0 0d60                     jmp  #_p1ccnext
0d54 : 1011                          ldm  r0,r1,#spy
0d55 : 1531                          ldm  r5,r3,#spy
0d56 : adf0 0d68                     jsr  #_p1cccompare
0d58 : ffe0                          sklt
0d59 : aff0 0d60                     jmp  #_p1ccnext
0d5b : 1032                          ldm  r0,r3,#spstatus
0d5c : e0e0                          skm  r0
0d5d : 30f0 8000                     add  r0,#$8000
0d5f : 2032                          stm  r0,r3,#spstatus
0d60 :                               ._p1ccnext
0d60 : 33e6                          add  r3,#spriterecordsize
0d61 : 54e1                          dec  r4
0d62 : b4e0                          skz  r4
0d63 : aff0 0d41                     jmp  #_p1ccloop
0d65 : 1dc0 3ce1                     pop  link
0d67 : afd0                          ret
0d68 :                               ._p1cccompare
0d68 : 5050                          sub  r0,r5,#0
0d69 : 30ef                          add  r0,#15
0d6a : 50f0 001e                     sub  r0,#30
0d6c : afd0                          ret
0d6d :                               .spritephase2
0d6d : 5ce1 2dc0                     push  link
0d6f : 11f0 400e                     ldm  r1,#spriteaddress
0d71 : 12f0 400f                     ldm  r2,#spritecount
0d73 :                               ._sp2loop
0d73 : 1012                          ldm  r0,r1,#spstatus
0d74 : e0e0                          skm  r0
0d75 : aff0 0d7c                     jmp  #_sp2next
0d77 : 90e8                          ror  r0,#8
0d78 : 60ef                          and  r0,#15
0d79 : b0e0                          skz  r0
0d7a : adf0 0d84                     jsr  #spritedraw
0d7c :                               ._sp2next
0d7c : 31e6                          add  r1,#spriterecordsize
0d7d : 52e1                          dec  r2
0d7e : b2e0                          skz  r2
0d7f : aff0 0d73                     jmp  #_sp2loop
0d81 : 1dc0 3ce1                     pop  link
0d83 : afd0                          ret
0d84 :                               .spritedraw
0d84 : 5ce3 22c0 23c1 2dc2           push  r2,r3,link
0d88 : 0300                          mov  r3,r0,#0
0d89 : 00e1                          mov  r0,#1
0d8a : 1210                          ldm  r2,r1,#spx
0d8b : 32f0 0020                     add  r2,#32
0d8d : 52f0 0180                     sub  r2,#pixelwidth+64
0d8f : ffe0                          sklt
0d90 : aff0 0dc2                     jmp  #_sdexit
0d92 : 1211                          ldm  r2,r1,#spy
0d93 : 32f0 0020                     add  r2,#32
0d95 : 52f0 0130                     sub  r2,#pixelheight+64
0d97 : ffe0                          sklt
0d98 : aff0 0dc2                     jmp  #_sdexit
0d9a : 1212                          ldm  r2,r1,#spstatus
0d9b : 92ed                          ror  r2,#13
0d9c : 00e8                          mov  r0,#8
0d9d : d2e0                          skp  r2
0d9e : 3000                          add  r0,r0,#0
0d9f : ade2                          jsr  #oswaitblitter
0da0 : 1210                          ldm  r2,r1,#spx
0da1 : 5200                          sub  r2,r0,#0
0da2 : 22f0 ff20                     stm  r2,#blitterx
0da4 : 1211                          ldm  r2,r1,#spy
0da5 : 5200                          sub  r2,r0,#0
0da6 : 22f0 ff21                     stm  r2,#blittery
0da8 : 1012                          ldm  r0,r1,#spstatus
0da9 : 60f0 00ff                     and  r0,#$00ff
0dab : 90ec                          ror  r0,#12
0dac : 12f0 4003                     ldm  r2,#spriteimagememory
0dae : 3020                          add  r0,r2,#0
0daf : 20f0 ff22                     stm  r0,#blitterdata
0db1 : 10f0 4013                     ldm  r0,#spriterotate
0db3 : 9300                          ror  r3,r0,#0
0db4 : 10f0 4012                     ldm  r0,#spritemask
0db6 : 90e8                          ror  r0,#8
0db7 : 3030                          add  r0,r3,#0
0db8 : 20f0 ff23                     stm  r0,#blittercmask
0dba : 1012                          ldm  r0,r1,#spstatus
0dbb : 60f0 7000                     and  r0,#$7000
0dbd : 30f0 0010                     add  r0,#$10
0dbf : 20f0 ff24                     stm  r0,#blittercmd
0dc1 : 7000                          clr  r0
0dc2 :                               ._sdexit
0dc2 : 12c0 13c1 1dc2 3ce3           pop  r2,r3,link
0dc6 : afd0                          ret
0dc7 :                               .osxdrawtilemap
0dc7 : 5cea 20c0 21c1 22c2 23c3      push  r0,r1,r2,r3,r4,r5,r6,r7,r8,link
0dd2 : 07f0 0010                     mov  r7,#16
0dd4 : adf0 0e4c                     jsr  #_osxdtmprocessx
0dd6 : adf0 0e5c                     jsr  #_osxdtmprocessy
0dd8 :                               ._osxdtm1
0dd8 : c5e0                          sknz  r5
0dd9 : aff0 0df2                     jmp  #_osxdtmexit
0ddb : 55e1                          dec  r5
0ddc : 5ce3 20c0 22c1 24c2           push  r0,r2,r4
0de0 :                               ._osxdtm2
0de0 : c4e0                          sknz  r4
0de1 : aff0 0dea                     jmp  #_osxdtmdonehorizontal
0de3 : 54e1                          dec  r4
0de4 : adf0 0dfe                     jsr  #osxdrawonetile
0de6 : 3070                          add  r0,r7,#0
0de7 : 32e1                          inc  r2
0de8 : aff0 0de0                     jmp  #_osxdtm2
0dea :                               ._osxdtmdonehorizontal
0dea : 10c0 12c1 14c2 3ce3           pop  r0,r2,r4
0dee : 3170                          add  r1,r7,#0
0def : 33e1                          inc  r3
0df0 : aff0 0dd8                     jmp  #_osxdtm1
0df2 :                               ._osxdtmexit
0df2 : 10c0 11c1 12c2 13c3 14c4      pop  r0,r1,r2,r3,r4,r5,r6,r7,r8,link
0dfd : afd0                          ret
0dfe :                               .osxdrawonetile
0dfe : 5ce6 20c0 21c1 24c2 25c3      push  r0,r1,r4,r5,r8,link
0e05 : ade2                          jsr  #oswaitblitter
0e06 : 20f0 ff20                     stm  r0,#blitterx
0e08 : 21f0 ff21                     stm  r1,#blittery
0e0a : d2e0                          skp  r2
0e0b : aff0 0e33                     jmp  #_osxdotbackground
0e0d : d3e0                          skp  r3
0e0e : aff0 0e33                     jmp  #_osxdotbackground
0e10 : 0020                          mov  r0,r2,#0
0e11 : 1162                          ldm  r1,r6,#2
0e12 : 5010                          sub  r0,r1,#0
0e13 : ffe0                          sklt
0e14 : aff0 0e33                     jmp  #_osxdotbackground
0e16 : 0030                          mov  r0,r3,#0
0e17 : 1163                          ldm  r1,r6,#3
0e18 : 5010                          sub  r0,r1,#0
0e19 : ffe0                          sklt
0e1a : aff0 0e33                     jmp  #_osxdotbackground
0e1c : 0030                          mov  r0,r3,#0
0e1d : 1162                          ldm  r1,r6,#2
0e1e : 8010                          mult  r0,r1,#0
0e1f : 3025                          add  r0,r2,#5
0e20 : 3060                          add  r0,r6,#0
0e21 : 1000                          ldm  r0,r0,#0
0e22 : 0500                          mov  r5,r0,#0
0e23 : 65f0 6000                     and  r5,#$6000
0e25 : 35f0 0800                     add  r5,#$0800
0e27 : 0800                          mov  r8,r0,#0
0e28 : 98e8                          ror  r8,#8
0e29 : 68e7                          and  r8,#7
0e2a : 60f0 00ff                     and  r0,#255
0e2c : 90ec                          ror  r0,#12
0e2d : 11f0 4003                     ldm  r1,#spriteimagememory
0e2f : 3010                          add  r0,r1,#0
0e30 : 0400                          mov  r4,r0,#0
0e31 : aff0 0e38                     jmp  #_osxdotdraw
0e33 :                               ._osxdotbackground
0e33 : 04f0 0e4b                     mov  r4,#_osxtilemasks
0e35 : 05f0 8000                     mov  r5,#$8000
0e37 : 1864                          ldm  r8,r6,#4
0e38 :                               ._osxdotdraw
0e38 : 24f0 ff22                     stm  r4,#blitterdata
0e3a : 14f0 4011                     ldm  r4,#colourmask
0e3c : 94e8                          ror  r4,#8
0e3d : 3480                          add  r4,r8,#0
0e3e : 24f0 ff23                     stm  r4,#blittercmask
0e40 : 3570                          add  r5,r7,#0
0e41 : 25f0 ff24                     stm  r5,#blittercmd
0e43 : 10c0 11c1 14c2 15c3 18c4      pop  r0,r1,r4,r5,r8,link
0e4a : afd0                          ret
0e4b :                               ._osxtilemasks
0e4b : ffff                          word  $ffff
0e4c :                               ._osxdtmprocessx
0e4c : 0820                          mov  r8,r2,#0
0e4d : 68ef                          and  r8,#15
0e4e : c8e0                          sknz  r8
0e4f : aff0 0e54                     jmp  #_osxdtmdivide
0e51 : 5080                          sub  r0,r8,#0
0e52 : 5280                          sub  r2,r8,#0
0e53 : 34e1                          inc  r4
0e54 :                               ._osxdtmdivide
0e54 : 0820                          mov  r8,r2,#0
0e55 : 92e4                          ror  r2,#4
0e56 : 62f0 0fff                     and  r2,#$0fff
0e58 : d8e0                          skp  r8
0e59 : 32f0 f000                     add  r2,#$f000
0e5b : afd0                          ret
0e5c :                               ._osxdtmprocessy
0e5c : 0830                          mov  r8,r3,#0
0e5d : 68ef                          and  r8,#15
0e5e : c8e0                          sknz  r8
0e5f : aff0 0e64                     jmp  #_osxdtmdivide2
0e61 : 5180                          sub  r1,r8,#0
0e62 : 5380                          sub  r3,r8,#0
0e63 : 35e1                          inc  r5
0e64 :                               ._osxdtmdivide2
0e64 : 0830                          mov  r8,r3,#0
0e65 : 93e4                          ror  r3,#4
0e66 : 63f0 0fff                     and  r3,#$0fff
0e68 : d8e0                          skp  r8
0e69 : 33f0 f000                     add  r3,#$f000
0e6b : afd0                          ret
0e6c :                               .osxsoundplay
0e6c : 5ce5 21c0 22c1 23c2 24c3      push r1,r2,r3,r4,link
0e72 : 0400                          mov  r4,r0,#0
0e73 : 54e3                          sub  r4,#sndchannels
0e74 : ffe0                          sklt
0e75 : aff0 0ea3                     jmp  #_osxspfail2
0e77 : 0410                          mov  r4,r1,#0
0e78 : 54f0 0020                     sub  r4,#32
0e7a : ffe0                          sklt
0e7b : aff0 0ea3                     jmp  #_osxspfail2
0e7d : 92e6                          ror  r2,#6
0e7e : 62f0 03ff                     and  r2,#$03ff
0e80 : c0e0                          sknz  r0
0e81 : 02ef                          mov  r2,#15
0e82 : 61f0 001f                     and  r1,#31
0e84 : 91e6                          ror  r1,#6
0e85 : 0410                          mov  r4,r1,#0
0e86 : 3420                          add  r4,r2,#0
0e87 : 63e1                          and  r3,#1
0e88 : 93e1                          ror  r3,#1
0e89 : 3430                          add  r4,r3,#0
0e8a : 80f0 0025                     mult  r0,#sndrecordsize
0e8c : 11f0 4010                     ldm  r1,#soundqueuebase
0e8e : 3010                          add  r0,r1,#0
0e8f : 1204                          ldm  r2,r0,#sndqueuetail
0e90 : 0305                          mov  r3,r0,#sndqueuestart
0e91 : 3320                          add  r3,r2,#0
0e92 : 2430                          stm  r4,r3,#0
0e93 : 32e1                          inc  r2
0e94 : 62f0 001f                     and  r2,#sndqueuesize-1
0e96 : 1303                          ldm  r3,r0,#sndqueuehead
0e97 : 7320                          xor  r3,r2,#0
0e98 : c3e0                          sknz  r3
0e99 : aff0 0ea1                     jmp  #_osxspfail1
0e9b : 2204                          stm  r2,r0,#sndqueuetail
0e9c : adf0 0ee9                     jsr  #osiupdatesound
0e9e : 7000                          clr  r0
0e9f : aff0 0ea4                     jmp  #_osxspexit
0ea1 :                               ._osxspfail1
0ea1 : 00e1                          mov  r0,#1
0ea2 : c0e0                          sknz  r0
0ea3 :                               ._osxspfail2
0ea3 : 00e2                          mov  r0,#2
0ea4 :                               ._osxspexit
0ea4 : 11c0 12c1 13c2 14c3 1dc4      pop  r1,r2,r3,r4,link
0eaa : afd0                          ret
0eab :                               .osxsoundcomplete
0eab : 5ce2 21c0 22c1                push  r1,r2
0eae : 80f0 0025                     mult  r0,#sndrecordsize
0eb0 : 11f0 4010                     ldm  r1,#soundqueuebase
0eb2 : 3100                          add  r1,r0,#0
0eb3 : 7000                          clr  r0
0eb4 : 1210                          ldm  r2,r1,#sndcompletetime
0eb5 : b2e0                          skz  r2
0eb6 : aff0 0ebe                     jmp  #_osxscoexit
0eb8 : 1213                          ldm  r2,r1,#sndqueuehead
0eb9 : 1114                          ldm  r1,r1,#sndqueuetail
0eba : 7120                          xor  r1,r2,#0
0ebb : c1e0                          sknz  r1
0ebc : 00f0 ffff                     mov  r0,#-1
0ebe :                               ._osxscoexit
0ebe : 11c0 12c1 3ce2                pop  r1,r2
0ec1 : afd0                          ret
0ec2 : afd0                          ret
0ec3 :                               .osxresetallchannels
0ec3 : 5ce2 20c0 2dc1                push  r0,link
0ec6 : 00e2                          mov  r0,#sndchannels-1
0ec7 :                               ._osiracloop
0ec7 : adf0 006a                     jsr  #ossoundresetchannel
0ec9 : 50e1                          dec  r0
0eca : e0e0                          skm  r0
0ecb : aff0 0ec7                     jmp  #_osiracloop
0ecd : 10c0 1dc1 3ce2                pop  r0,link
0ed0 : afd0                          ret
0ed1 :                               .osxsoundresetchannel
0ed1 : 5ce2 20c0 21c1                push  r0,r1
0ed4 : 0100                          mov  r1,r0,#0
0ed5 : 31f0 ff40                     add  r1,#sndchannelbase
0ed7 : 2e10                          stm  r14,r1,#0
0ed8 : 80f0 0025                     mult  r0,#sndrecordsize
0eda : 11f0 4010                     ldm  r1,#soundqueuebase
0edc : 3100                          add  r1,r0,#0
0edd : 00f0 0025                     mov  r0,#sndrecordsize
0edf :                               ._osxsrcloop
0edf : 2e10                          stm  r14,r1,#0
0ee0 : 31e1                          inc  r1
0ee1 : 50e1                          dec  r0
0ee2 : b0e0                          skz  r0
0ee3 : aff0 0edf                     jmp  #_osxsrcloop
0ee5 : 10c0 11c1 3ce2                pop  r0,r1
0ee8 : afd0                          ret
0ee9 :                               .osiupdatesound
0ee9 : 5ce7 20c0 21c1 22c2 23c3      push  r0,r1,r2,r3,r4,r5,link
0ef1 : 14f0 4010                     ldm  r4,#soundqueuebase
0ef3 : 05f0 ff40                     mov  r5,#sndnoise
0ef5 : adf0 0f22                     jsr  #osiupdateonechannel
0ef7 : 34f0 0025                     add  r4,#sndrecordsize
0ef9 : 05f0 ff42                     mov  r5,#sndtone1
0efb : adf0 0f22                     jsr  #osiupdateonechannel
0efd : 34f0 0025                     add  r4,#sndrecordsize
0eff : 05f0 ff42                     mov  r5,#sndtone2
0f01 : adf0 0f22                     jsr  #osiupdateonechannel
0f03 : 10c0 11c1 12c2 13c3 14c4      pop  r0,r1,r2,r3,r4,r5,link
0f0b : afd0                          ret
0f0c :                               .osisoundchecktime
0f0c : 10f0 ff30                     ldm  r0,#hwtimer
0f0e : 1140                          ldm  r1,r4,#sndcompletetime
0f0f : 5010                          sub  r0,r1,#0
0f10 : d0e0                          skp  r0
0f11 : aff0 0f1c                     jmp  #_osisoundplaying
0f13 : 2e40                          stm  r14,r4,#sndcompletetime
0f14 : 1044                          ldm  r0,r4,#sndqueuetail
0f15 : 1143                          ldm  r1,r4,#sndqueuehead
0f16 : 7010                          xor  r0,r1,#0
0f17 : b0e0                          skz  r0
0f18 : aff0 0f22                     jmp  #osiupdateonechannel
0f1a : 2e50                          stm  r14,r5,#0
0f1b : afd0                          ret
0f1c :                               ._osisoundplaying
0f1c : 1041                          ldm  r0,r4,#sndpitch
0f1d : 1142                          ldm  r1,r4,#sndslide
0f1e : 5010                          sub  r0,r1,#0
0f1f : 2041                          stm  r0,r4,#sndpitch
0f20 : 2050                          stm  r0,r5,#0
0f21 : afd0                          ret
0f22 :                               .osiupdateonechannel
0f22 : 1040                          ldm  r0,r4,#sndcompletetime
0f23 : b0e0                          skz  r0
0f24 : aff0 0f0c                     jmp  #osisoundchecktime
0f26 : 1044                          ldm  r0,r4,#sndqueuetail
0f27 : 1143                          ldm  r1,r4,#sndqueuehead
0f28 : 7010                          xor  r0,r1,#0
0f29 : c0e0                          sknz  r0
0f2a : afd0                          ret
0f2b : 5ce1 22c0                     push  r2
0f2d : 0015                          mov  r0,r1,#sndqueuestart
0f2e : 3040                          add  r0,r4,#0
0f2f : 1000                          ldm  r0,r0,#0
0f30 : 31e1                          inc  r1
0f31 : 61f0 001f                     and  r1,#sndqueuesize-1
0f33 : 2143                          stm  r1,r4,#sndqueuehead
0f34 : 0100                          mov  r1,r0,#0
0f35 : 91ea                          ror  r1,#10
0f36 : 61f0 001f                     and  r1,#31
0f38 : 81ea                          mult  r1,#10
0f39 : 12f0 ff30                     ldm  r2,#hwtimer
0f3b : 3210                          add  r2,r1,#0
0f3c : c2e0                          sknz  r2
0f3d : 02e1                          mov  r2,#1
0f3e : 2240                          stm  r2,r4,#sndcompletetime
0f3f : 0200                          mov  r2,r0,#0
0f40 : d2e0                          skp  r2
0f41 : aff0 0f4b                     jmp  #_osicreateslide
0f43 : 60f0 03ff                     and  r0,#$03ff
0f45 : 90ea                          ror  r0,#10
0f46 : 2041                          stm  r0,r4,#sndpitch
0f47 : 2050                          stm  r0,r5,#0
0f48 : 2e42                          stm  r14,r4,#sndslide
0f49 : aff0 0f4f                     jmp  #_osicreateexit
0f4b :                               ._osicreateslide
0f4b : 60f0 03ff                     and  r0,#$03ff
0f4d : 90ea                          ror  r0,#10
0f4e : 2042                          stm  r0,r4,#sndslide
0f4f :                               ._osicreateexit
0f4f : 12c0 3ce1                     pop  r2
0f51 : afd0                          ret
0f52 :                               .osxudivide16
0f52 : 5ce3 22c0 23c1 24c2           push  r2,r3,r4
0f56 : 7220                          clr  r2
0f57 : 03f0 0010                     mov  r3,#16
0f59 :                               ._osxudloop1
0f59 : 3220                          add  r2,r2,#0
0f5a : 3000                          add  r0,r0,#0
0f5b : 42e0                          adc  r2,r14,#0
0f5c : 0420                          mov  r4,r2,#0
0f5d : 5410                          sub  r4,r1,#0
0f5e : ffe0                          sklt
0f5f : 0240                          mov  r2,r4,#0
0f60 : ffe0                          sklt
0f61 : 30e1                          inc  r0
0f62 : 53e1                          dec  r3
0f63 : b3e0                          skz  r3
0f64 : aff0 0f59                     jmp  #_osxudloop1
0f66 : 0120                          mov  r1,r2,#0
0f67 : 12c0 13c1 14c2 3ce3           pop  r2,r3,r4
0f6b : afd0                          ret
0f6c :                               .osxsdivide16
0f6c : 5ce3 22c0 23c1 2dc2           push  r2,r3,link
0f70 : 0300                          mov  r3,r0,#0
0f71 : 7310                          xor  r3,r1,#0
0f72 : 7220                          clr  r2
0f73 : 5200                          sub  r2,r0,#0
0f74 : d0e0                          skp  r0
0f75 : 0020                          mov  r0,r2,#0
0f76 : 7220                          clr  r2
0f77 : 5210                          sub  r2,r1,#0
0f78 : d1e0                          skp  r1
0f79 : 0120                          mov  r1,r2,#0
0f7a : adf0 0f52                     jsr  #osxudivide16
0f7c : 7220                          clr  r2
0f7d : 5200                          sub  r2,r0,#0
0f7e : d3e0                          skp  r3
0f7f : 0020                          mov  r0,r2,#0
0f80 : 12c0 13c1 1dc2 3ce3           pop  r2,r3,link
0f84 : afd0                          ret
0f85 :                               .osxrandom16
0f85 : 5ce1 21c0                     push  r1
0f87 : 10f0 4068                     ldm  r0,#randomseed
0f89 : 0100                          mov  r1,r0,#0
0f8a : 90e9                          ror  r0,#9
0f8b : 60f0 ff80                     and  r0,#$ff80
0f8d : 7010                          xor  r0,r1,#0
0f8e : 0100                          mov  r1,r0,#0
0f8f : 90e7                          ror  r0,#7
0f90 : 60f0 01ff                     and  r0,#$01ff
0f92 : 7010                          xor  r0,r1,#0
0f93 : 0100                          mov  r1,r0,#0
0f94 : 90e8                          ror  r0,#8
0f95 : 60f0 ff00                     and  r0,#$ff00
0f97 : 7010                          xor  r0,r1,#0
0f98 : 20f0 4068                     stm  r0,#randomseed
0f9a : 11c0 3ce1                     pop  r1
0f9c : afd0                          ret
0f9d :                               .osxrandomseed
0f9d : 20f0 4068                     stm  r0,#randomseed
0f9f : afd0                          ret
0fa0 :                               .osxstrtoint
0fa0 : 5ce6 22c0 23c1 24c2 25c3      push  r2,r3,r4,r5,r6,link
0fa7 : 0200                          mov  r2,r0,#0
0fa8 : 7330                          clr  r3
0fa9 : 7440                          clr  r4
0faa : 06e1                          mov  r6,#1
0fab : ad20                          brl  r13,r2,#0
0fac : 60f0 00ff                     and  r0,#$00ff
0fae : 0500                          mov  r5,r0,#0
0faf : 75f0 002d                     xor  r5,#'-'
0fb1 : b5e0                          skz  r5
0fb2 : aff0 0fb6                     jmp  #_ossiloop
0fb4 : 34e1                          inc  r4
0fb5 : ad20                          brl  r13,r2,#0
0fb6 :                               ._ossiloop
0fb6 : adf0 0022                     jsr  #osuppercase
0fb8 : 50f0 0030                     sub  r0,#'0'
0fba : ffe1                          skge
0fbb : aff0 0fd2                     jmp  #_ossiexit
0fbd : 0500                          mov  r5,r0,#0
0fbe : 50ea                          sub  r0,#10
0fbf : ffe1                          skge
0fc0 : aff0 0fc7                     jmp  #_osshavedigit
0fc2 : 55e7                          sub  r5,#7
0fc3 : 50e7                          sub  r0,#7
0fc4 : ffe1                          skge
0fc5 : aff0 0fd2                     jmp  #_ossiexit
0fc7 :                               ._osshavedigit
0fc7 : 0050                          mov  r0,r5,#0
0fc8 : 5010                          sub  r0,r1,#0
0fc9 : ffe0                          sklt
0fca : aff0 0fd2                     jmp  #_ossiexit
0fcc : 8310                          mult  r3,r1,#0
0fcd : 3350                          add  r3,r5,#0
0fce : 7660                          clr  r6
0fcf : ad20                          brl  r13,r2,#0
0fd0 : aff0 0fb6                     jmp  #_ossiloop
0fd2 :                               ._ossiexit
0fd2 : 7550                          clr  r5
0fd3 : 5530                          sub  r5,r3,#0
0fd4 : b4e0                          skz  r4
0fd5 : 0350                          mov  r3,r5,#0
0fd6 : 0030                          mov  r0,r3,#0
0fd7 : 0160                          mov  r1,r6,#0
0fd8 : 12c0 13c1 14c2 15c3 16c4      pop  r2,r3,r4,r5,r6,link
0fdf : afd0                          ret
0fe0 :                               .osxinttostr
0fe0 : 5ce5 21c0 22c1 23c2 24c3      push  r1,r2,r3,r4,link
0fe6 : 02f0 4069                     mov  r2,#convbuffer
0fe8 : 2e20                          stm  r14,r2,#0
0fe9 : 2e21                          stm  r14,r2,#1
0fea : e1e0                          skm  r1
0feb : aff0 0ff8                     jmp  #_osisnotnegative
0fed : e0e0                          skm  r0
0fee : aff0 0ff8                     jmp  #_osisnotnegative
0ff0 : 03f0 002d                     mov  r3,#'-'
0ff2 : 2321                          stm  r3,r2,#1
0ff3 : 03e1                          mov  r3,#1
0ff4 : 2320                          stm  r3,r2,#0
0ff5 : 70f0 ffff                     xor  r0,#$ffff
0ff7 : 30e1                          inc  r0
0ff8 :                               ._osisnotnegative
0ff8 : 61f0 001f                     and  r1,#$001f
0ffa : 0310                          mov  r3,r1,#0
0ffb : adf0 1006                     jsr  #_osisrecurse
0ffd : 00f0 4069                     mov  r0,#convbuffer
0fff : 11c0 12c1 13c2 14c3 1dc4      pop  r1,r2,r3,r4,link
1005 : afd0                          ret
1006 :                               ._osisrecurse
1006 : 5ce2 21c0 2dc1                push  r1,link
1009 : 0130                          mov  r1,r3,#0
100a : adf0 0014                     jsr  #osudivide16
100c : b0e0                          skz  r0
100d : adf0 1006                     jsr  #_osisrecurse
100f : 51ea                          sub  r1,#10
1010 : e1e0                          skm  r1
1011 : 31e7                          add  r1,#7
1012 : 31f0 003a                     add  r1,#58
1014 : 1020                          ldm  r0,r2,#0
1015 : 90e1                          ror  r0,#1
1016 : d0e0                          skp  r0
1017 : 91e8                          ror  r1,#8
1018 : 60f0 7fff                     and  r0,#$7fff
101a : 30f0 406a                     add  r0,#convbuffer+1
101c : 1400                          ldm  r4,r0,#0
101d : 3410                          add  r4,r1,#0
101e : 2400                          stm  r4,r0,#0
101f : 2e01                          stm  r14,r0,#1
1020 : 1020                          ldm  r0,r2,#0
1021 : 30e1                          inc  r0
1022 : 2020                          stm  r0,r2,#0
1023 : 11c0 1dc1 3ce2                pop  r1,link
1026 : afd0                          ret
1027 :                               .osxuppercase
1027 : 5ce1 21c0                     push  r1
1029 : 60f0 00ff                     and  r0,#$00ff
102b : 0100                          mov  r1,r0,#0
102c : 51f0 0061                     sub  r1,#'a'
102e : ffe1                          skge
102f : aff0 1036                     jmp  #_osucexit
1031 : 51f0 001a                     sub  r1,#26
1033 : ffe1                          skge
1034 : 50f0 0020                     sub  r0,#32
1036 :                               ._osucexit
1036 : 11c0 3ce1                     pop  r1
1038 : afd0                          ret
1039 :                               .osxlowercase
1039 : 5ce1 21c0                     push  r1
103b : 60f0 00ff                     and  r0,#$00ff
103d : 0100                          mov  r1,r0,#0
103e : 51f0 0041                     sub  r1,#65
1040 : ffe1                          skge
1041 : aff0 1048                     jmp  #_oslcexit
1043 : 51f0 001a                     sub  r1,#26
1045 : ffe1                          skge
1046 : 30f0 0020                     add  r0,#32
1048 :                               ._oslcexit
1048 : 11c0 3ce1                     pop  r1
104a : afd0                          ret
104b :                               .osxwordlength
104b : 1000                          ldm  r0,r0,#0
104c : 30e1                          inc  r0
104d : 90e1                          ror  r0,#1
104e : 60f0 7fff                     and  r0,#$7fff
1050 : afd0                          ret
1051 :                               .osxreadsystemvariable
1051 : 30f0 4000                     add  r0,#systemvariables
1053 : 1000                          ldm  r0,r0,#0
1054 : afd0                          ret
1055 :                               .osxinclusiveor
1055 : 5ce1 21c0                     push  r1
1057 : 70f0 ffff                     xor  r0,#$ffff
1059 : 71f0 ffff                     xor  r1,#$ffff
105b : 6010                          and  r0,r1,#0
105c : 70f0 ffff                     xor  r0,#$ffff
105e : 11c0 3ce1                     pop  r1
1060 : afd0                          ret
11ff : 0000                          word  0
4000 :                               .initialisedstart
4000 :                               .systemvariables
4000 :                               .lowmemory
4001 :                               .highmemory
4002 :                               .textmemory
4003 :                               .spriteimagememory
4004 :                               .spriteimagecount
4005 :                               .xtextextent
4006 :                               .ytextextent
4007 :                               .defaultfont
4008 :                               .xtextpos
4009 :                               .ytextpos
400a :                               .xgraphic
400b :                               .ygraphic
400c :                               .fgrcolour
400d :                               .bgrcolour
400e :                               .spriteaddress
400f :                               .spritecount
4010 :                               .soundqueuebase
4011 :                               .colourmask
4012 :                               .spritemask
4013 :                               .spriterotate
4014 :                               .activeplane
4015 :                               .currentkey
4016 :                               .currentrowstatus
401c :                               .keyrepeattime
401d :                               .functionkeyqueue
401e :                               .functionkeybyte
401f :                               .functionkeydefinitions
4067 :                               .nextmanagerevent
4068 :                               .initialisedend
4068 :                               .randomseed
4069 :                               .convbuffer
4073 :                               .blittertemp
4074 :                               .spritesenabled
4075 :                               .spriteselect
4076 :                               .freememory
